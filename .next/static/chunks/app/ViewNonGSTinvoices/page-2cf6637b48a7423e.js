(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4561],{55986:(e,t,c)=>{Promise.resolve().then(c.bind(c,98524))},98524:(e,t,c)=>{"use strict";c.r(t),c.d(t,{default:()=>l});var a=c(95155),r=c(58803),o=c.n(r),i=c(12115),s=c(82651),n=c(76046),d=c(11536),b=c(5565);let l=()=>{let[e,t]=(0,i.useState)([]),[c,r]=(0,i.useState)(""),[l,x]=(0,i.useState)([]),p=(0,n.useRouter)(),u=e=>{let{dateString:t}=e,c=new Date(t),r=String(c.getDate()).padStart(2,"0"),o=String(c.getMonth()+1).padStart(2,"0"),i=c.getFullYear(),s=String(c.getHours()).padStart(2,"0"),n=String(c.getMinutes()).padStart(2,"0"),d=String(c.getSeconds()).padStart(2,"0");return(0,a.jsxs)("span",{children:[o,"/",r,"/",i," at ",s,":",n,":",d]})},m=e=>{let t=new Date(e),c=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return"".concat(r,"-").concat(a,"-").concat(c," ").concat(o,":").concat(i,":").concat(s)};(0,i.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await s.A.get("http://15.207.48.53:3000/allnongstinvoices");t(e.data),x(e.data)}catch(e){console.error("Error fetching invoices:",e)}},h=async()=>{if(!c){window.alert("Please enter a customer name.");return}try{let e=await s.A.get("http://15.207.48.53:3000/nongstinvoices/customer/".concat(c));x(e.data)}catch(e){console.error("Error searching invoices:",e),window.alert("No invoices found for this customer.")}},j=(e,t)=>{let c=encodeURIComponent(m(t)),a="http://15.207.48.53:3000/nongstinvoices/".concat(e,"/").concat(c,"/download");window.open(a,"_blank")},w=async(e,c)=>{let a=encodeURIComponent(m(c)),r="http://15.207.48.53:3000/deleteNonGstinvoices/".concat(e,"/").concat(a);try{await s.A.delete(r),window.alert("Invoice deleted successfully"),t(t=>t.filter(t=>t.customer_name!==e||t.created_at!==c)),x(t=>t.filter(t=>t.customer_name!==e||t.created_at!==c))}catch(e){console.error("Error deleting invoice:",e),window.alert("Failed to delete invoice")}};return(0,a.jsxs)("div",{className:"jsx-c1cca8b358001b76 container",children:[(0,a.jsxs)("div",{className:"jsx-c1cca8b358001b76 header-container",children:[(0,a.jsx)("div",{className:"jsx-c1cca8b358001b76 user-img",children:(0,a.jsx)(b.default,{src:"/webbuild/images/usericon.png",alt:"User Icon",width:50,height:50,className:"usrimg"})}),(0,a.jsxs)("div",{className:"jsx-c1cca8b358001b76 user-info",children:[(0,a.jsx)("p",{className:"jsx-c1cca8b358001b76 helloname",children:"Hello,"}),(0,a.jsx)("p",{className:"jsx-c1cca8b358001b76 username",children:"OmSai"})]})]}),(0,a.jsx)("h2",{className:"jsx-c1cca8b358001b76",children:"This is Non GST section"}),(0,a.jsxs)("div",{className:"jsx-c1cca8b358001b76 buttons-container",children:[(0,a.jsx)("button",{onClick:()=>p.push("/GenerateNonGSTInvoice"),className:"jsx-c1cca8b358001b76 view-invoices-button",children:"New Invoice"}),(0,a.jsx)("button",{onClick:()=>p.push("/NonGstBilling_ledger"),className:"jsx-c1cca8b358001b76 view-invoices-button",children:"Billing Ledger"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Search by customer name",value:c,onChange:e=>r(e.target.value),className:"jsx-c1cca8b358001b76 search-input"}),(0,a.jsx)("button",{onClick:h,className:"jsx-c1cca8b358001b76 search-button",children:"Search"}),(0,a.jsx)("div",{className:"jsx-c1cca8b358001b76 invoices-list",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"jsx-c1cca8b358001b76 invoice-item",children:[(0,a.jsx)("div",{onClick:()=>w(e.customer_name,e.created_at),className:"jsx-c1cca8b358001b76 delete-icon",children:(0,a.jsx)(d.qbC,{size:24,color:"red"})}),(0,a.jsxs)("p",{className:"jsx-c1cca8b358001b76 invoice-text",children:["Customer: ",e.customer_name]}),(0,a.jsx)("p",{className:"jsx-c1cca8b358001b76",children:(0,a.jsx)(u,{dateString:e.created_at})}),(0,a.jsx)("button",{onClick:()=>j(e.customer_name,e.created_at),className:"jsx-c1cca8b358001b76 download-button",children:"Download"})]},t))}),(0,a.jsx)(o(),{id:"c1cca8b358001b76",children:".container.jsx-c1cca8b358001b76{padding:20px}.header-container.jsx-c1cca8b358001b76{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px}.user-img.jsx-c1cca8b358001b76{width:50px;height:50px;-webkit-border-radius:20px;-moz-border-radius:20px;border-radius:20px;overflow:hidden}.user-info.jsx-c1cca8b358001b76{margin-left:10px}.helloname.jsx-c1cca8b358001b76{font-size:14px;color:gray;margin:0}.username.jsx-c1cca8b358001b76{font-size:18px;font-weight:bold;color:darkslategrey;margin:0}.buttons-container.jsx-c1cca8b358001b76{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:20px}.view-invoices-button.jsx-c1cca8b358001b76{padding:10px;width:48%;background-color:#841584;border:none;-webkit-border-radius:18px;-moz-border-radius:18px;border-radius:18px;color:white;font-size:16px;cursor:pointer}.search-input.jsx-c1cca8b358001b76{height:40px;width:100%;border:1px solid gray;margin-bottom:12px;padding:8px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.search-button.jsx-c1cca8b358001b76{background-color:#841584;padding:10px 0;border:none;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;margin-bottom:20px;width:100%;color:white;font-size:16px;cursor:pointer}.invoice-item.jsx-c1cca8b358001b76{position:relative;padding:16px;border-bottom:1px solid gray;background-color:#f9f9f9;margin:8px 0;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.invoice-text.jsx-c1cca8b358001b76{font-size:16px;margin-bottom:8px}.delete-icon.jsx-c1cca8b358001b76{position:absolute;top:8px;right:8px;z-index:1;cursor:pointer}.download-button.jsx-c1cca8b358001b76{background-color:darkslategrey;padding:10px;border:none;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;margin-top:10px;color:white;font-size:16px;cursor:pointer;width:100%}"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,5565,2651,226,8441,1517,7358],()=>t(55986)),_N_E=e.O()}]);