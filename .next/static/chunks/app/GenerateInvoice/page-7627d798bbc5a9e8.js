(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8615],{90929:(e,t,a)=>{Promise.resolve().then(a.bind(a,31836))},31836:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(95155),s=a(12115),n=a(82651),l=a(65122),i=a(64665),o=a(42479),c=a(10810),m=a(66456),u=a(69841);let d=()=>{let[e,t]=(0,s.useState)(!0),[a,d]=(0,s.useState)({name:"",mobile:"",address:"",gstin:""}),[h,g]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),[v,A]=(0,s.useState)(""),[j,C]=(0,s.useState)([{name:"",quantity:"",rate:"",gst:"18",hsn:"998717"}]);(0,s.useEffect)(()=>{n.A.get("http://15.207.48.53:3000/customers").then(e=>{g(e.data)}).catch(e=>console.error("Error fetching customers:",e))},[]);let p=(e,t)=>{d(a=>({...a,[e]:t}))},f=e=>{C(t=>t.filter((t,a)=>a!==e))},N=async()=>{try{let e=await n.A.post("http://15.207.48.53:3000/generate-bill",{customerName:a.name,customerMobile:a.mobile,customerAddress:a.address,customerGstin:a.gstin,products:j.map(e=>({name:e.name,quantity:parseFloat(e.quantity),rate:parseFloat(e.rate),gst:parseFloat(e.gst),hsn:e.hsn}))});200===e.status&&alert("Invoice generated successfully!")}catch(e){console.error("Error generating invoice:",e),alert("Failed to generate invoice.")}};return(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,r.jsx)(l.A,{variant:e?"contained":"outlined",onClick:()=>t(!0),sx:{backgroundColor:"#841584",color:"#fff"},children:"New Customer"}),(0,r.jsx)(l.A,{variant:e?"outlined":"contained",onClick:()=>t(!1),sx:{backgroundColor:"#841584",color:"#fff"},children:"Existing Customer"})]}),e?(0,r.jsx)(i.A,{className:"mb-6",children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"New Customer Details"}),["name","mobile","address","gstin"].map(e=>(0,r.jsx)(m.A,{label:"Customer ".concat(e.charAt(0).toUpperCase()+e.slice(1)),value:a[e],onChange:t=>p(e,t.target.value),fullWidth:!0,margin:"normal",type:"mobile"===e?"number":"text",inputProps:"gstin"===e?{style:{textTransform:"uppercase"}}:{}},e))]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"mb-6",children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Search Existing Customer"}),(0,r.jsx)(m.A,{label:"Search by name or mobile",value:v,onChange:e=>A(e.target.value),fullWidth:!0,margin:"normal"}),(0,r.jsx)(l.A,{variant:"contained",onClick:()=>{let e=h.find(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.mobile.includes(v));e?(b(e),d(e)):alert("No customer matches your search.")},className:"mt-4",children:"Search"})]})}),x&&(0,r.jsx)(i.A,{className:"mb-6",children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Customer Details"}),["name","mobile","address","gstin"].map(e=>(0,r.jsx)(m.A,{label:"Customer ".concat(e.charAt(0).toUpperCase()+e.slice(1)),value:a[e],onChange:t=>p(e,t.target.value),fullWidth:!0,margin:"normal"},e))]})})]}),(0,r.jsx)(i.A,{className:"mb-6",children:(0,r.jsxs)(o.A,{children:[(0,r.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Products"}),j.map((e,t)=>(0,r.jsxs)(i.A,{className:"mb-4",children:[(0,r.jsxs)(o.A,{children:[(0,r.jsxs)(c.A,{variant:"subtitle1",gutterBottom:!0,children:["Product ",t+1]}),(0,r.jsx)(m.A,{label:"Product Name",value:e.name,onChange:e=>{let a=[...j];a[t].name=e.target.value,C(a)},fullWidth:!0,margin:"normal"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(m.A,{label:"Quantity",type:"number",value:e.quantity,onChange:e=>{let a=[...j];a[t].quantity=e.target.value,C(a)},margin:"normal"}),(0,r.jsx)(m.A,{label:"Rate",type:"number",value:e.rate,onChange:e=>{let a=[...j];a[t].rate=e.target.value,C(a)},margin:"normal"}),(0,r.jsx)(m.A,{label:"GST (%)",type:"number",value:e.gst,onChange:e=>{let a=[...j];a[t].gst=e.target.value,C(a)},margin:"normal"}),(0,r.jsx)(m.A,{label:"HSN Code",type:"number",value:e.hsn,onChange:e=>{let a=[...j];a[t].hsn=e.target.value,C(a)},margin:"normal"})]})]}),(0,r.jsx)(u.A,{children:(0,r.jsx)(l.A,{color:"error",onClick:()=>f(t),children:"Delete Product"})})]},t)),(0,r.jsx)(l.A,{variant:"outlined",onClick:()=>{C(e=>[...e,{name:"",quantity:"",rate:"",gst:"18",hsn:"998717"}])},className:"mt-4",children:"Add Product"})]})}),(0,r.jsx)(l.A,{variant:"contained",sx:{backgroundColor:"#841584"},onClick:N,fullWidth:!0,size:"large",children:"Generate Invoice"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,81,1462,8441,1517,7358],()=>t(90929)),_N_E=e.O()}]);