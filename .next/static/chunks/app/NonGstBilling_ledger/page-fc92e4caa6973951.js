(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4353],{55890:(e,t,n)=>{Promise.resolve().then(n.bind(n,52448))},76046:(e,t,n)=>{"use strict";var r=n(66658);n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},52448:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(95155),a=n(12115),l=n(82651),o=n(76046),d=n(5565);let i=()=>{var e,t,n;let[i,c]=(0,a.useState)([]),[h,p]=(0,a.useState)(""),[x,u]=(0,a.useState)(""),[m,g]=(0,a.useState)(""),[y,b]=(0,a.useState)([]),[w,j]=(0,a.useState)(""),[C,v]=(0,a.useState)(""),[f,A]=(0,a.useState)(""),P=(0,o.useRouter)(),S=e=>{let t="\n      <html>\n        <head>\n          <title>Non-GST Billing Ledger</title>\n          <style>\n            table { width: 100%; border-collapse: collapse; }\n            table, th, td { border: 1px solid black; }\n            th, td { padding: 8px; text-align: center; }\n          </style>\n        </head>\n        <body>\n          <h1>Non-GST Billing Ledger</h1>\n          <table>\n            <tr>\n              <th>Date</th>\n              <th>Invoice No</th>\n              <th>Customer Name</th>\n              <th>Contact No</th>\n              <th>Company</th>\n              <th>Payment Status</th>\n              <th>Payment Method</th>\n              <th>Total Amount</th>\n              <th>Total Paid</th>\n              <th>Due</th>\n            </tr>\n            ".concat(e.map(e=>"\n              <tr>\n                <td>".concat(e.Date||"-","</td>\n                <td>").concat(e.InvoiceNo||"-","</td>\n                <td>").concat(e.CustomerName||"-","</td>\n                <td>").concat(e.ContactNumber||"-","</td>\n                <td>").concat(e.Company||"Om Sai Enterprises","</td>\n                <td>").concat(e.PaymentStatus||"Due","</td>\n                <td>").concat(e.PaymentMethod||"None","</td>\n                <td>").concat(e.TotalAmount||0,"</td>\n                <td>").concat(e.TotalPaid||0,"</td>\n                <td>").concat(e.Due||0,"</td>\n              </tr>\n            ")).join(""),"\n          </table>\n        </body>\n      </html>\n    "),n=window.open("","_blank");n?(n.document.write(t),n.document.close(),n.focus(),n.print(),n.close(),window.alert("PDF Exported")):window.alert("Popup blocked. Please allow popups for this website.")},k=()=>{l.A.get("http://15.207.48.53:3000/nongstcustomer").then(e=>{b(e.data.map(e=>({label:e.name,value:e.name})))}).catch(e=>console.error("Error fetching customer names:",e))},N=()=>h&&i.length?i.reduce((e,t)=>{let n=t.TotalAmount?parseFloat(String(t.TotalAmount)):0,r=t.TotalPaid?parseFloat(String(t.TotalPaid)):0,a=t.Due?parseFloat(String(t.Due)):0;return e.totalAmount+=isNaN(n)?0:n,e.totalPaid+=isNaN(r)?0:r,e.due+=isNaN(a)?0:a,e},{totalAmount:0,totalPaid:0,due:0}):null,W=e=>{let t="";"Due payments"===e?t="Due":"Partial payments"===e?t="Partial":"Paid"===e&&(t="Paid"),C!==t&&v(t)};(0,a.useEffect)(()=>{k()},[]);let D=(e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{padding:"10px",minWidth:70,maxWidth:120,textAlign:"center",border:"1px solid #ccc",wordWrap:"break-word",wordBreak:"break-word"},children:e.Date||"-"}),(0,r.jsx)("td",{style:{...s.cell,minWidth:70,maxWidth:70,textAlign:"center",wordWrap:"break-word"},children:e.InvoiceNo||"-"}),(0,r.jsx)("td",{style:{...s.cell,minWidth:180,maxWidth:180,textAlign:"center",wordWrap:"break-word"},children:e.CustomerName||"-"}),(0,r.jsx)("td",{style:{...s.cell,minWidth:101,maxWidth:120,textAlign:"center",wordWrap:"break-word"},children:e.ContactNumber||"-"}),(0,r.jsx)("td",{style:{...s.cell,minWidth:120,maxWidth:151,textAlign:"center",wordWrap:"break-word"},children:e.Company||"Om Sai Enterprises"}),(0,r.jsx)("td",{style:{...s.cell,width:120,textAlign:"center",wordWrap:"break-word"},children:e.PaymentStatus||"Due"}),(0,r.jsx)("td",{style:{...s.cell,width:120,textAlign:"center",wordWrap:"break-word"},children:e.PaymentMethod||"None"}),(0,r.jsx)("td",{style:{...s.cell,minWidth:120,textAlign:"center",wordWrap:"break-word"},children:e.TotalAmount||0}),(0,r.jsx)("td",{style:{...s.cell,minWidth:120,textAlign:"center",wordWrap:"break-word"},children:e.TotalPaid||0}),(0,r.jsx)("td",{style:{...s.cell,minWidth:120,textAlign:"center",wordWrap:"break-word"},children:e.Due||0})]},t);return(0,r.jsxs)("div",{style:s.container,children:[(0,r.jsxs)("div",{style:s.headerContainer,children:[(0,r.jsx)(d.default,{style:s.usrimg,src:"/webbuild/images/usericon.png",alt:"User Icon",width:50,height:50}),(0,r.jsxs)("div",{style:s.userInfo,children:[(0,r.jsx)("p",{style:s.helloname,children:"Hello,"}),(0,r.jsx)("p",{style:s.username,children:"OmSai"})]})]}),(0,r.jsx)("div",{style:s.separator}),(0,r.jsx)("div",{style:{marginLeft:10,marginBottom:10},children:(0,r.jsx)("p",{children:"OmSai Generators"})}),(0,r.jsxs)("div",{style:s.buttonContainer,children:[(0,r.jsx)("button",{style:s.payment_exportButton,onClick:()=>P.push("/nonAddpaymentpopup"),children:"Add Payment"}),(0,r.jsx)("button",{style:s.payment_exportButton,onClick:()=>{let e=window.prompt('Enter export format: "excel" or "pdf" (or cancel)');(null==e?void 0:e.toLowerCase())==="excel"?window.alert("Excel export is not supported."):(null==e?void 0:e.toLowerCase())==="pdf"&&S(i)},children:"Export"})]}),(0,r.jsx)("div",{style:s.actionsContainer,children:(0,r.jsxs)("select",{value:f,onChange:e=>{A(e.target.value),W(e.target.value)},style:s.dropdown,children:[(0,r.jsx)("option",{value:"",children:"Payment Status"}),(0,r.jsx)("option",{value:"Due payments",children:"Due Payments"}),(0,r.jsx)("option",{value:"Partial payments",children:"Partial Payments"}),(0,r.jsx)("option",{value:"Paid",children:"Paid"})]})}),(0,r.jsxs)("div",{style:s.filterContainer,children:[(0,r.jsxs)("div",{style:{marginBottom:10},children:[(0,r.jsxs)("select",{value:h,onChange:e=>p(e.target.value),style:s.dropdown,children:[(0,r.jsx)("option",{value:"",children:"Select Customer"}),y.filter(e=>e.label.toLowerCase().includes(w.toLowerCase())).map((e,t)=>(0,r.jsx)("option",{value:e.value,children:e.label},t))]}),(0,r.jsx)("input",{type:"text",placeholder:"Search Customer",value:w,onChange:e=>j(e.target.value),style:{...s.input,marginTop:5}})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:10},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"Start Date:"}),(0,r.jsx)("input",{type:"date",value:x,onChange:e=>u(e.target.value),style:s.input})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{children:"End Date:"}),(0,r.jsx)("input",{type:"date",value:m,onChange:e=>g(e.target.value),style:s.input})]})]}),(0,r.jsx)("button",{style:s.button,onClick:()=>{let e="http://15.207.48.53:3000/nongstbillingledger?";h&&(e+="customer_name=".concat(h,"&")),x&&(e+="start_date=".concat(x,"&")),m&&(e+="end_date=".concat(m,"&")),C&&(e+="payment_status=".concat(C,"&")),l.A.get(e).then(e=>{JSON.stringify(e.data)!==JSON.stringify(i)&&c(e.data)}).catch(e=>console.error("Error fetching ledger data:",e))},children:"Search"})]}),h&&(0,r.jsxs)("div",{style:s.summaryCard,children:[(0,r.jsxs)("h3",{children:["Ledger for ",h]}),(0,r.jsxs)("p",{children:["Total Amount: ",(null===(e=N())||void 0===e?void 0:e.totalAmount.toFixed(2))||"0.00"]}),(0,r.jsxs)("p",{children:["Total Paid: ",(null===(t=N())||void 0===t?void 0:t.totalPaid.toFixed(2))||"0.00"]}),(0,r.jsxs)("p",{children:["Due: ",(null===(n=N())||void 0===n?void 0:n.due.toFixed(2))||"0.00"]})]}),(0,r.jsx)("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{style:s.table,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{...s.row,...s.headerRow},children:[(0,r.jsx)("th",{style:{...s.headerCell,width:143,textAlign:"center"},children:"Date"}),(0,r.jsx)("th",{style:{...s.headerCell,width:70,textAlign:"center"},children:"Invoice No"}),(0,r.jsx)("th",{style:{...s.headerCell,width:180,textAlign:"center"},children:"Customer Name"}),(0,r.jsx)("th",{style:{...s.headerCell,width:120,textAlign:"center"},children:"Contact No"}),(0,r.jsx)("th",{style:{...s.headerCell,width:151,textAlign:"center"},children:"Company"}),(0,r.jsx)("th",{style:{...s.headerCell,width:151,textAlign:"center"},children:"Payment Status"}),(0,r.jsx)("th",{style:{...s.headerCell,width:151,textAlign:"center"},children:"Payment Method"}),(0,r.jsx)("th",{style:{...s.headerCell,width:151,textAlign:"center"},children:"Total Amount"}),(0,r.jsx)("th",{style:{...s.headerCell,width:151,textAlign:"center"},children:"Total Paid"}),(0,r.jsx)("th",{style:{...s.headerCell,width:151,textAlign:"center"},children:"Due"})]})}),(0,r.jsx)("tbody",{children:i.map((e,t)=>D(e,t))})]})})]})},s={container:{padding:"15px",fontFamily:"Arial, sans-serif"},headerContainer:{display:"flex",alignItems:"center",marginBottom:"20px"},usrimg:{width:"50px",height:"50px",borderRadius:"20px"},userInfo:{marginLeft:"10px"},helloname:{fontSize:"14px",color:"gray",margin:0},username:{fontSize:"18px",fontWeight:"bold",color:"darkslategrey",margin:0},separator:{margin:"5px 0",borderBottom:"1px solid black"},buttonContainer:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},payment_exportButton:{backgroundColor:"#841584",color:"white",padding:"12px 20px",border:"none",borderRadius:"10px",flex:1,margin:"0 5px",cursor:"pointer"},actionsContainer:{marginBottom:"10px"},dropdown:{height:"40px",borderColor:"#ccc",borderWidth:"1px",borderStyle:"solid",borderRadius:"5px",paddingLeft:"10px",width:"100%",marginBottom:"10px"},filterContainer:{backgroundColor:"white",padding:"5px",borderRadius:"5px",marginBottom:"20px"},input:{fontSize:"14px",padding:"5px",marginTop:"5px",border:"1px solid #ccc",borderRadius:"5px"},button:{backgroundColor:"#841584",color:"white",padding:"12px 30px",border:"none",borderRadius:"10px",cursor:"pointer"},table:{borderCollapse:"collapse",width:"100%"},row:{borderBottom:"1px solid #ccc"},headerRow:{backgroundColor:"#d3d3d3"},cell:{padding:"10px",textAlign:"center",border:"1px solid #ccc",wordWrap:"break-word"},headerCell:{fontWeight:"bold",padding:"10px",textAlign:"center",border:"1px solid #ccc",color:"#000"},summaryCard:{backgroundColor:"#f9f9f9",padding:"10px",borderRadius:"5px",marginBottom:"20px",border:"1px solid #ccc"}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5565,2651,8441,1517,7358],()=>t(55890)),_N_E=e.O()}]);