(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2761],{15762:(e,t,a)=>{Promise.resolve().then(a.bind(a,48356))},48356:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(95155),o=a(58803),r=a.n(o),d=a(12115),l=a(76046),i=a(55178),b=a.n(i),n=a(13691),x=a.n(n),c=a(93004),p=a(5565);let m=()=>{var e,t,a;let[o,i]=(0,d.useState)([]),[n,m]=(0,d.useState)(!1),[u,j]=(0,d.useState)(""),[h,g]=(0,d.useState)([]),[f,w]=(0,d.useState)(0),[k,N]=(0,d.useState)(0),[y,v]=(0,d.useState)(0),[z,C]=(0,d.useState)(!1),[T,A]=(0,d.useState)({}),_=c.dr.UserName,S=(0,l.useRouter)();(0,d.useEffect)(()=>{b().setAppElement(document.body)},[]);let R=async()=>{if(!u){alert("Please select a month");return}m(!0);try{let e=await fetch("http://15.207.48.53:3000/export-month?month=".concat(u)),t=await e.json();e.ok?(i(t.results),w(t.totalAgreedAmount),N(t.totalExpenses),v(t.profit)):alert(t.message||"An error occurred")}catch(e){console.error("Error fetching export data:",e.message)}finally{m(!1)}},E=e=>{let t=o.filter(t=>t.vehicle_number===e);g(t);let a=0,s=0;t.forEach(e=>{a+=parseFloat(e.agreed_amount),s+=parseFloat(e.total_expenses)});let r=a-s;A({vehicle_number:e,totalAgreedAmount:a,totalExpenses:s,profit:r}),C(!0)},P=Array.from(new Set(o.map(e=>e.vehicle_number))).map(e=>o.find(t=>t.vehicle_number===e));return(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b safeArea",children:[(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b header",children:[(0,s.jsx)(p.default,{src:"/webbuild/images/usericon.png",alt:"User Icon",width:55,height:55,className:"rounded-full margin-right-10"}),(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b user-text",children:[(0,s.jsx)("p",{className:"jsx-9e550a748bd3349b helloname",children:"Hello,"}),(0,s.jsx)("p",{className:"jsx-9e550a748bd3349b username",children:_})]}),(0,s.jsx)("button",{onClick:()=>console.log("Logout"),className:"jsx-9e550a748bd3349b logout-button",children:(0,s.jsx)(p.default,{src:"/webbuild/images/Logout.png",alt:"User Icon",width:25,height:25,className:"rounded-full"})})]}),(0,s.jsx)("div",{className:"jsx-9e550a748bd3349b separator"}),(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b buttonRow",children:[(0,s.jsx)("button",{onClick:()=>S.push("/customer_ledger"),className:"jsx-9e550a748bd3349b buttonledger",children:"Pending Ledger"}),(0,s.jsx)("button",{style:{width:"250px"},onClick:()=>S.push("/CustomerWiseVehicleRecord"),className:"jsx-9e550a748bd3349b buttonledger",children:"CustomerWise Vehicle Details"})]}),(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b container",children:[n&&(0,s.jsx)("p",{className:"jsx-9e550a748bd3349b loadingText",children:"Loading..."}),(0,s.jsx)("h2",{className:"jsx-9e550a748bd3349b exportTitle",children:"Export Last Month Data"}),(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b monthPickerContainer",children:[(0,s.jsxs)("select",{value:u,onChange:e=>j(e.target.value),className:"jsx-9e550a748bd3349b picker",children:[(0,s.jsx)("option",{value:"",className:"jsx-9e550a748bd3349b",children:"Select Month"}),(0,s.jsx)("option",{value:"01",className:"jsx-9e550a748bd3349b",children:"January"}),(0,s.jsx)("option",{value:"02",className:"jsx-9e550a748bd3349b",children:"February"}),(0,s.jsx)("option",{value:"03",className:"jsx-9e550a748bd3349b",children:"March"}),(0,s.jsx)("option",{value:"04",className:"jsx-9e550a748bd3349b",children:"April"}),(0,s.jsx)("option",{value:"05",className:"jsx-9e550a748bd3349b",children:"May"}),(0,s.jsx)("option",{value:"06",className:"jsx-9e550a748bd3349b",children:"June"}),(0,s.jsx)("option",{value:"07",className:"jsx-9e550a748bd3349b",children:"July"}),(0,s.jsx)("option",{value:"08",className:"jsx-9e550a748bd3349b",children:"August"}),(0,s.jsx)("option",{value:"09",className:"jsx-9e550a748bd3349b",children:"September"}),(0,s.jsx)("option",{value:"10",className:"jsx-9e550a748bd3349b",children:"October"}),(0,s.jsx)("option",{value:"11",className:"jsx-9e550a748bd3349b",children:"November"}),(0,s.jsx)("option",{value:"12",className:"jsx-9e550a748bd3349b",children:"December"})]}),(0,s.jsx)("button",{onClick:R,className:"jsx-9e550a748bd3349b button",children:"Export"})]}),(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b totalContainer",children:[(0,s.jsxs)("p",{className:"jsx-9e550a748bd3349b totalText",children:["Net Amount: Rs.",f.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9e550a748bd3349b totalText",children:["Total Expenses: Rs.",k.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9e550a748bd3349b totalText",children:["Profit: Rs.",y.toFixed(2)]})]}),P.length>0&&!n&&(0,s.jsx)("div",{className:"jsx-9e550a748bd3349b",children:P.map(e=>(0,s.jsxs)("button",{onClick:()=>E(e.vehicle_number),className:"jsx-9e550a748bd3349b carCard",children:["Car: ",e.vehicle_number]},e.vehicle_number))}),(0,s.jsxs)(b(),{isOpen:z,onRequestClose:()=>C(!1),contentLabel:"Car Records Modal",className:"modalContent",overlayClassName:"modalOverlay",children:[(0,s.jsxs)("h3",{className:"jsx-9e550a748bd3349b modalTitle",children:["Monthly Record for ",T.vehicle_number]}),(0,s.jsxs)("div",{className:"jsx-9e550a748bd3349b totalsContainer",children:[(0,s.jsxs)("p",{className:"jsx-9e550a748bd3349b totalsText",children:["Total Agreed Amount: Rs. ",null===(e=T.totalAgreedAmount)||void 0===e?void 0:e.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9e550a748bd3349b totalsText",children:["Total Expenses: Rs. ",null===(t=T.totalExpenses)||void 0===t?void 0:t.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9e550a748bd3349b totalsText",children:["Total Profit: Rs. ",null===(a=T.profit)||void 0===a?void 0:a.toFixed(2)]})]}),(0,s.jsx)("div",{className:"jsx-9e550a748bd3349b tableContainer",children:(0,s.jsx)("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},className:"jsx-9e550a748bd3349b",children:(0,s.jsxs)("table",{className:"jsx-9e550a748bd3349b recordsTable",children:[(0,s.jsx)("thead",{className:"jsx-9e550a748bd3349b",children:(0,s.jsxs)("tr",{className:"jsx-9e550a748bd3349b",children:[(0,s.jsx)("th",{className:"jsx-9e550a748bd3349b",children:"ID"}),(0,s.jsx)("th",{style:{minWidth:120},className:"jsx-9e550a748bd3349b",children:"Date"}),(0,s.jsx)("th",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:"Customer"}),(0,s.jsx)("th",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:"Agreed Amount"}),(0,s.jsx)("th",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:"Expenses"}),(0,s.jsx)("th",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:"Profit"})]})}),(0,s.jsx)("tbody",{className:"jsx-9e550a748bd3349b",children:h.map((e,t)=>(0,s.jsxs)("tr",{className:"jsx-9e550a748bd3349b tableRow",children:[(0,s.jsx)("td",{className:"jsx-9e550a748bd3349b",children:e.id}),(0,s.jsx)("td",{style:{minWidth:120},className:"jsx-9e550a748bd3349b",children:x()(e.cleared_at).format("DD-MM-YYYY")}),(0,s.jsx)("td",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:e.issued_to}),(0,s.jsxs)("td",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:["Rs.",e.agreed_amount]}),(0,s.jsxs)("td",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:["Rs.",e.total_expenses]}),(0,s.jsxs)("td",{style:{textAlign:"left"},className:"jsx-9e550a748bd3349b",children:["Rs.",(e.agreed_amount-e.total_expenses).toFixed(2)]})]},t))})]})})}),(0,s.jsx)("button",{onClick:()=>C(!1),className:"jsx-9e550a748bd3349b closeModalButton",children:"Close"})]})]}),(0,s.jsx)(r(),{id:"9e550a748bd3349b",children:".safeArea.jsx-9e550a748bd3349b{min-height:100vh;background-color:#f8f8f8}.header.jsx-9e550a748bd3349b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:20px}.usernameContainer.jsx-9e550a748bd3349b{margin-left:20px;text-align:left}.usrimg.jsx-9e550a748bd3349b{margin-left:20px;margin-top:20px;width:50px;height:50px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-o-object-fit:cover;object-fit:cover}.user-text.jsx-9e550a748bd3349b{margin-right:1350px;padding-left:10px}.helloname.jsx-9e550a748bd3349b{margin:0;font-size:14px;margin-bottom:0px;margin-top:0px}.username.jsx-9e550a748bd3349b{margin:0;font-size:16px;font-weight:bold;color:darkslategrey;margin-top:0px}.logout-button.jsx-9e550a748bd3349b{position:absolute;top:20px;right:20px;background:none;border:none;cursor:pointer}.logoutimg.jsx-9e550a748bd3349b{width:25px;height:25px}.separator.jsx-9e550a748bd3349b{margin:25px 20px 10px 20px;border-bottom:1px solid#000}.buttonRow.jsx-9e550a748bd3349b{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-webkit-justify-content:left;-moz-box-pack:left;-ms-flex-pack:left;justify-content:left;gap:10px}.buttonledger.jsx-9e550a748bd3349b{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:150px;height:42px;margin:10px;cursor:pointer}.container.jsx-9e550a748bd3349b{padding:10px;text-align:center}.loadingText.jsx-9e550a748bd3349b{font-size:18px;font-weight:bold;color:#4caf50;margin-top:20px}.exportTitle.jsx-9e550a748bd3349b{font-size:16px;font-weight:bold;margin:10px 0 30px}.monthPickerContainer.jsx-9e550a748bd3349b{margin:0 auto 20px;width:90%;padding:5px;border:2px solid black;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.picker.jsx-9e550a748bd3349b{height:56px;width:95%;border:1px solid#ccc;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;padding:5px;font-size:16px;margin-bottom:10px}.button.jsx-9e550a748bd3349b{background-color:#841584;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:200px;color:white;font-weight:bold;cursor:pointer;margin-bottom:10px}.totalContainer.jsx-9e550a748bd3349b{background-color:#fff;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);width:100%;margin:55px auto 20px;margin-top:10px;text-align:center}.totalText.jsx-9e550a748bd3349b{font-size:16px;font-weight:bold;margin-bottom:10px;color:#333}.carCard.jsx-9e550a748bd3349b{margin:5px auto;padding:15px;border:1px solid#ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:300px;background-color:#fff;cursor:pointer;display:block}.carRecord.jsx-9e550a748bd3349b{margin:5px auto;padding:15px;border:1px solid#ccc;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;width:275px;background-color:#fff;text-align:left}.detailsText.jsx-9e550a748bd3349b{font-size:15px;color:#333;margin-bottom:5px}.modalContent.jsx-9e550a748bd3349b{background-color:#fff;padding:25px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:90%;max-width:900px;margin:auto;max-height:80vh;overflow-y:auto}.modalOverlay.jsx-9e550a748bd3349b{background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.modalTitle.jsx-9e550a748bd3349b{font-size:20px;font-weight:bold;margin-bottom:15px;text-align:center;color:#841584}.totalsContainer.jsx-9e550a748bd3349b{margin-bottom:15px;text-align:center;background:#f8f8f8;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.totalsText.jsx-9e550a748bd3349b{font-size:16px;margin-bottom:8px;font-weight:500}.closeModalButton.jsx-9e550a748bd3349b{background-color:#841584;color:white;padding:12px 25px;border:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;cursor:pointer;margin-top:15px;font-size:14px;-webkit-transition:opacity.3s;-moz-transition:opacity.3s;-o-transition:opacity.3s;transition:opacity.3s}.closeModalButton.jsx-9e550a748bd3349b:hover{opacity:.9}.tableContainer.jsx-9e550a748bd3349b{margin:20px 0;border:1px solid#e0e0e0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.05);-moz-box-shadow:0 2px 4px rgba(0,0,0,.05);box-shadow:0 2px 4px rgba(0,0,0,.05)}.recordsTable.jsx-9e550a748bd3349b{width:100%;border-collapse:collapse;background:white;font-size:15px}.recordsTable.jsx-9e550a748bd3349b th.jsx-9e550a748bd3349b{background-color:#841584;color:white;font-weight:bold;padding:12px 15px;text-align:left;position:-webkit-sticky;position:sticky;top:0;font-size:15px}.recordsTable.jsx-9e550a748bd3349b td.jsx-9e550a748bd3349b{padding:12px 15px;border-bottom:1px solid#f0f0f0;color:#333;font-size:14px}.recordsTable.jsx-9e550a748bd3349b tr.jsx-9e550a748bd3349b:nth-child(even){background-color:#f9f9f9}.recordsTable.jsx-9e550a748bd3349b tr.jsx-9e550a748bd3349b:hover{background-color:#f5f5f5}.recordsTable.jsx-9e550a748bd3349b td.jsx-9e550a748bd3349b:last-child,.recordsTable.jsx-9e550a748bd3349b td.jsx-9e550a748bd3349b:nth-child(3),.recordsTable.jsx-9e550a748bd3349b td.jsx-9e550a748bd3349b:nth-child(5),.recordsTable.jsx-9e550a748bd3349b td.jsx-9e550a748bd3349b:nth-child(7){text-align:right}.recordsTable.jsx-9e550a748bd3349b th.jsx-9e550a748bd3349b:nth-child(3),.recordsTable.jsx-9e550a748bd3349b th.jsx-9e550a748bd3349b:nth-child(5),.recordsTable.jsx-9e550a748bd3349b th.jsx-9e550a748bd3349b:nth-child(7){text-align:right}"})]})}},93004:(e,t,a)=>{"use strict";a.d(t,{K6:()=>r,dr:()=>s,jI:()=>o});let s={TempforViewing:null,totalPendingAmount:0,UserName:"OmSai",totalCount:0},o=()=>{try{let e=localStorage.getItem("totalPendingAmount"),t=localStorage.getItem("totalCount");null!==e&&(s.totalPendingAmount=Number(e)),null!==t&&(s.totalCount=Number(t))}catch(e){console.error("Error loading global state:",e)}},r=()=>{try{localStorage.setItem("totalPendingAmount",String(s.totalPendingAmount)),localStorage.setItem("totalCount",String(s.totalCount))}catch(e){console.error("Error saving global state:",e)}}}},e=>{var t=t=>e(e.s=t);e.O(0,[586,5565,5473,8441,1517,7358],()=>t(15762)),_N_E=e.O()}]);