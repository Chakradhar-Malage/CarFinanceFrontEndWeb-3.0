(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2761],{37881:(e,c,a)=>{Promise.resolve().then(a.bind(a,48356))},48356:(e,c,a)=>{"use strict";a.r(c),a.d(c,{default:()=>b});var t=a(95155),s=a(58803),o=a.n(s),r=a(12115),l=a(76046),i=a(55178),n=a.n(i),x=a(13691),d=a.n(x),p=a(93004),m=a(5565);let b=()=>{var e,c,a;let[s,i]=(0,r.useState)([]),[x,b]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[j,g]=(0,r.useState)([]),[f,w]=(0,r.useState)(0),[k,N]=(0,r.useState)(0),[y,v]=(0,r.useState)(0),[z,C]=(0,r.useState)(!1),[T,A]=(0,r.useState)({}),[_,S]=(0,r.useState)(""),R=p.dr.UserName,E=(0,l.useRouter)();(0,r.useEffect)(()=>{n().setAppElement(document.body)},[]);let P=(0,r.useMemo)(()=>{let e=d()().year(),c=[];for(let a=2025;a<=e+1;a++)c.push(a);return c},[]),M=async()=>{if(!u||!_){alert("Please select both month and year");return}b(!0);try{let e=await fetch("http://15.207.48.53:3000/export-month?month=".concat(u,"&year=").concat(_)),c=await e.json();e.ok?(i(c.results),w(c.totalAgreedAmount),N(c.totalExpenses),v(c.profit)):alert(c.error||c.message||"An error occurred")}catch(e){console.error("Error fetching export data:",e.message),alert("Failed to fetch data")}finally{b(!1)}},F=e=>{let c=s.filter(c=>c.vehicle_number===e);g(c);let a=0,t=0;c.forEach(e=>{a+=parseFloat(e.agreed_amount),t+=parseFloat(e.total_expenses)});let o=a-t;A({vehicle_number:e,totalAgreedAmount:a,totalExpenses:t,profit:o}),C(!0)},I=Array.from(new Set(s.map(e=>e.vehicle_number))).map(e=>s.find(c=>c.vehicle_number===e));return(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 safeArea",children:[(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 header",children:[(0,t.jsx)(m.default,{src:"/webbuild/images/usericon.png",alt:"User Icon",width:55,height:55,className:"rounded-full margin-right-10"}),(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 user-text",children:[(0,t.jsx)("p",{className:"jsx-678c117ca811c271 helloname",children:"Hello,"}),(0,t.jsx)("p",{className:"jsx-678c117ca811c271 username",children:R})]}),(0,t.jsx)("button",{onClick:()=>console.log("Logout"),className:"jsx-678c117ca811c271 logout-button",children:(0,t.jsx)(m.default,{src:"/webbuild/images/Logout.png",alt:"User Icon",width:25,height:25,className:"rounded-full"})})]}),(0,t.jsx)("div",{className:"jsx-678c117ca811c271 separator"}),(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 buttonRow",children:[(0,t.jsx)("button",{onClick:()=>E.push("/customer_ledger"),className:"jsx-678c117ca811c271 buttonledger",children:"Pending Ledger"}),(0,t.jsx)("button",{style:{width:"250px"},onClick:()=>E.push("/CustomerWiseVehicleRecord"),className:"jsx-678c117ca811c271 buttonledger",children:"CustomerWise Vehicle Details"})]}),(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 container",children:[x&&(0,t.jsx)("p",{className:"jsx-678c117ca811c271 loadingText",children:"Loading..."}),(0,t.jsx)("h2",{className:"jsx-678c117ca811c271 exportTitle",children:"Export Last Month Data"}),(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 monthPickerContainer",children:[(0,t.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"jsx-678c117ca811c271 picker",children:[(0,t.jsx)("option",{value:"",className:"jsx-678c117ca811c271",children:"Select Year"}),P.map(e=>(0,t.jsx)("option",{value:e,className:"jsx-678c117ca811c271",children:e},e))]}),(0,t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"jsx-678c117ca811c271 picker",children:[(0,t.jsx)("option",{value:"",className:"jsx-678c117ca811c271",children:"Select Month"}),(0,t.jsx)("option",{value:"01",className:"jsx-678c117ca811c271",children:"January"}),(0,t.jsx)("option",{value:"02",className:"jsx-678c117ca811c271",children:"February"}),(0,t.jsx)("option",{value:"03",className:"jsx-678c117ca811c271",children:"March"}),(0,t.jsx)("option",{value:"04",className:"jsx-678c117ca811c271",children:"April"}),(0,t.jsx)("option",{value:"05",className:"jsx-678c117ca811c271",children:"May"}),(0,t.jsx)("option",{value:"06",className:"jsx-678c117ca811c271",children:"June"}),(0,t.jsx)("option",{value:"07",className:"jsx-678c117ca811c271",children:"July"}),(0,t.jsx)("option",{value:"08",className:"jsx-678c117ca811c271",children:"August"}),(0,t.jsx)("option",{value:"09",className:"jsx-678c117ca811c271",children:"September"}),(0,t.jsx)("option",{value:"10",className:"jsx-678c117ca811c271",children:"October"}),(0,t.jsx)("option",{value:"11",className:"jsx-678c117ca811c271",children:"November"}),(0,t.jsx)("option",{value:"12",className:"jsx-678c117ca811c271",children:"December"})]}),(0,t.jsx)("button",{onClick:M,className:"jsx-678c117ca811c271 button",children:"Export"})]}),(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 totalContainer",children:[(0,t.jsxs)("p",{className:"jsx-678c117ca811c271 totalText",children:["Net Amount: Rs.",f.toFixed(2)]}),(0,t.jsxs)("p",{className:"jsx-678c117ca811c271 totalText",children:["Total Expenses: Rs.",k.toFixed(2)]}),(0,t.jsxs)("p",{className:"jsx-678c117ca811c271 totalText",children:["Profit: Rs.",y.toFixed(2)]})]}),I.length>0&&!x&&(0,t.jsx)("div",{className:"jsx-678c117ca811c271",children:I.map(e=>(0,t.jsxs)("button",{onClick:()=>F(e.vehicle_number),className:"jsx-678c117ca811c271 carCard",children:["Car: ",e.vehicle_number]},e.vehicle_number))}),(0,t.jsxs)(n(),{isOpen:z,onRequestClose:()=>C(!1),contentLabel:"Car Records Modal",className:"modalContent",overlayClassName:"modalOverlay",children:[(0,t.jsxs)("h3",{className:"jsx-678c117ca811c271 modalTitle",children:["Monthly Record for ",T.vehicle_number]}),(0,t.jsxs)("div",{className:"jsx-678c117ca811c271 totalsContainer",children:[(0,t.jsxs)("p",{className:"jsx-678c117ca811c271 totalsText",children:["Total Agreed Amount: Rs."," ",null===(e=T.totalAgreedAmount)||void 0===e?void 0:e.toFixed(2)]}),(0,t.jsxs)("p",{className:"jsx-678c117ca811c271 totalsText",children:["Total Expenses: Rs. ",null===(c=T.totalExpenses)||void 0===c?void 0:c.toFixed(2)]}),(0,t.jsxs)("p",{className:"jsx-678c117ca811c271 totalsText",children:["Total Profit: Rs. ",null===(a=T.profit)||void 0===a?void 0:a.toFixed(2)]})]}),(0,t.jsx)("div",{className:"jsx-678c117ca811c271 tableContainer",children:(0,t.jsx)("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},className:"jsx-678c117ca811c271",children:(0,t.jsxs)("table",{className:"jsx-678c117ca811c271 recordsTable",children:[(0,t.jsx)("thead",{className:"jsx-678c117ca811c271",children:(0,t.jsxs)("tr",{className:"jsx-678c117ca811c271",children:[(0,t.jsx)("th",{className:"jsx-678c117ca811c271",children:"ID"}),(0,t.jsx)("th",{style:{minWidth:120},className:"jsx-678c117ca811c271",children:"Date"}),(0,t.jsx)("th",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:"Customer"}),(0,t.jsx)("th",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:"Agreed Amount"}),(0,t.jsx)("th",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:"Expenses"}),(0,t.jsx)("th",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:"Profit"})]})}),(0,t.jsx)("tbody",{className:"jsx-678c117ca811c271",children:j.map((e,c)=>(0,t.jsxs)("tr",{className:"jsx-678c117ca811c271 tableRow",children:[(0,t.jsx)("td",{className:"jsx-678c117ca811c271",children:e.id}),(0,t.jsx)("td",{style:{minWidth:120},className:"jsx-678c117ca811c271",children:d()(e.cleared_at).format("DD-MM-YYYY")}),(0,t.jsx)("td",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:e.issued_to}),(0,t.jsxs)("td",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:["Rs.",e.agreed_amount]}),(0,t.jsxs)("td",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:["Rs.",e.total_expenses]}),(0,t.jsxs)("td",{style:{textAlign:"left"},className:"jsx-678c117ca811c271",children:["Rs.",(e.agreed_amount-e.total_expenses).toFixed(2)]})]},c))})]})})}),(0,t.jsx)("button",{onClick:()=>C(!1),className:"jsx-678c117ca811c271 closeModalButton",children:"Close"})]})]}),(0,t.jsx)(o(),{id:"678c117ca811c271",children:".safeArea.jsx-678c117ca811c271{min-height:100vh;background-color:#f8f8f8}.header.jsx-678c117ca811c271{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:20px}.usernameContainer.jsx-678c117ca811c271{margin-left:20px;text-align:left}.usrimg.jsx-678c117ca811c271{margin-left:20px;margin-top:20px;width:50px;height:50px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-o-object-fit:cover;object-fit:cover}.user-text.jsx-678c117ca811c271{margin-right:1350px;padding-left:10px}.helloname.jsx-678c117ca811c271{margin:0;font-size:14px;margin-bottom:0px;margin-top:0px}.username.jsx-678c117ca811c271{margin:0;font-size:16px;font-weight:bold;color:darkslategrey;margin-top:0px}.logout-button.jsx-678c117ca811c271{position:absolute;top:20px;right:20px;background:none;border:none;cursor:pointer}.logoutimg.jsx-678c117ca811c271{width:25px;height:25px}.separator.jsx-678c117ca811c271{margin:25px 20px 10px 20px;border-bottom:1px solid#000}.buttonRow.jsx-678c117ca811c271{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-webkit-justify-content:left;-moz-box-pack:left;-ms-flex-pack:left;justify-content:left;gap:10px}.buttonledger.jsx-678c117ca811c271{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:150px;height:42px;margin:10px;cursor:pointer}.container.jsx-678c117ca811c271{padding:10px;text-align:center}.loadingText.jsx-678c117ca811c271{font-size:18px;font-weight:bold;color:#4caf50;margin-top:20px}.exportTitle.jsx-678c117ca811c271{font-size:16px;font-weight:bold;margin:10px 0 30px}.monthPickerContainer.jsx-678c117ca811c271{margin:0 auto 20px;width:90%;padding:5px;border:2px solid black;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.picker.jsx-678c117ca811c271{height:56px;width:95%;border:1px solid#ccc;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;padding:5px;font-size:16px;margin-bottom:10px}.button.jsx-678c117ca811c271{background-color:#841584;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:200px;color:white;font-weight:bold;cursor:pointer;margin-bottom:10px}.totalContainer.jsx-678c117ca811c271{background-color:#fff;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);width:100%;margin:55px auto 20px;margin-top:10px;text-align:center}.totalText.jsx-678c117ca811c271{font-size:16px;font-weight:bold;margin-bottom:10px;color:#333}.carCard.jsx-678c117ca811c271{margin:5px auto;padding:15px;border:1px solid#ccc;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:300px;background-color:#fff;cursor:pointer;display:block}.carRecord.jsx-678c117ca811c271{margin:5px auto;padding:15px;border:1px solid#ccc;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;width:275px;background-color:#fff;text-align:left}.detailsText.jsx-678c117ca811c271{font-size:15px;color:#333;margin-bottom:5px}.modalContent.jsx-678c117ca811c271{background-color:#fff;padding:25px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;width:90%;max-width:900px;margin:auto;max-height:80vh;overflow-y:auto}.modalOverlay.jsx-678c117ca811c271{background-color:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.modalTitle.jsx-678c117ca811c271{font-size:20px;font-weight:bold;margin-bottom:15px;text-align:center;color:#841584}.totalsContainer.jsx-678c117ca811c271{margin-bottom:15px;text-align:center;background:#f8f8f8;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.totalsText.jsx-678c117ca811c271{font-size:16px;margin-bottom:8px;font-weight:500}.closeModalButton.jsx-678c117ca811c271{background-color:#841584;color:white;padding:12px 25px;border:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;cursor:pointer;margin-top:15px;font-size:14px;-webkit-transition:opacity.3s;-moz-transition:opacity.3s;-o-transition:opacity.3s;transition:opacity.3s}.closeModalButton.jsx-678c117ca811c271:hover{opacity:.9}.tableContainer.jsx-678c117ca811c271{margin:20px 0;border:1px solid#e0e0e0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.05);-moz-box-shadow:0 2px 4px rgba(0,0,0,.05);box-shadow:0 2px 4px rgba(0,0,0,.05)}.recordsTable.jsx-678c117ca811c271{width:100%;border-collapse:collapse;background:white;font-size:15px}.recordsTable.jsx-678c117ca811c271 th.jsx-678c117ca811c271{background-color:#841584;color:white;font-weight:bold;padding:12px 15px;text-align:left;position:-webkit-sticky;position:sticky;top:0;font-size:15px}.recordsTable.jsx-678c117ca811c271 td.jsx-678c117ca811c271{padding:12px 15px;border-bottom:1px solid#f0f0f0;color:#333;font-size:14px}.recordsTable.jsx-678c117ca811c271 tr.jsx-678c117ca811c271:nth-child(even){background-color:#f9f9f9}.recordsTable.jsx-678c117ca811c271 tr.jsx-678c117ca811c271:hover{background-color:#f5f5f5}.recordsTable.jsx-678c117ca811c271 td.jsx-678c117ca811c271:last-child,.recordsTable.jsx-678c117ca811c271 td.jsx-678c117ca811c271:nth-child(3),.recordsTable.jsx-678c117ca811c271 td.jsx-678c117ca811c271:nth-child(5),.recordsTable.jsx-678c117ca811c271 td.jsx-678c117ca811c271:nth-child(7){text-align:right}.recordsTable.jsx-678c117ca811c271 th.jsx-678c117ca811c271:nth-child(3),.recordsTable.jsx-678c117ca811c271 th.jsx-678c117ca811c271:nth-child(5),.recordsTable.jsx-678c117ca811c271 th.jsx-678c117ca811c271:nth-child(7){text-align:right}"})]})}},93004:(e,c,a)=>{"use strict";a.d(c,{K6:()=>o,dr:()=>t,jI:()=>s});let t={TempforViewing:null,totalPendingAmount:0,UserName:"OmSai",totalCount:0},s=()=>{try{let e=localStorage.getItem("totalPendingAmount"),c=localStorage.getItem("totalCount");null!==e&&(t.totalPendingAmount=Number(e)),null!==c&&(t.totalCount=Number(c))}catch(e){console.error("Error loading global state:",e)}},o=()=>{try{localStorage.setItem("totalPendingAmount",String(t.totalPendingAmount)),localStorage.setItem("totalCount",String(t.totalCount))}catch(e){console.error("Error saving global state:",e)}}}},e=>{var c=c=>e(e.s=c);e.O(0,[586,5565,5473,8441,1517,7358],()=>c(37881)),_N_E=e.O()}]);