(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8184],{52958:(e,c,a)=>{Promise.resolve().then(a.bind(a,97731))},97731:(e,c,a)=>{"use strict";a.r(c),a.d(c,{default:()=>h});var s=a(95155),d=a(58803),t=a.n(d),o=a(12115),r=a(13691),i=a.n(r),l=a(5565),n=a(76046),x=a(93004),f=a(10142),b=a(92340),p=a.n(b);let h=()=>{let[e,c]=(0,o.useState)([]),[a,d]=(0,o.useState)(""),[r,b]=(0,o.useState)(""),[h,m]=(0,o.useState)(""),[u,j]=(0,o.useState)([]),[g,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)(0),[y,v]=(0,o.useState)(0),[z,C]=(0,o.useState)(0),[T,S]=(0,o.useState)(!1),[_,A]=(0,o.useState)(""),P=x.dr.UserName,D=(0,n.useRouter)();(0,o.useEffect)(()=>{fetch("http://15.207.48.53:3000/unique-customers").then(e=>{if(!e.ok)throw Error("Failed to fetch customers");return e.json()}).then(e=>c(e.customers||[])).catch(e=>console.error("Error fetching customers:",e))},[]),(0,o.useEffect)(()=>{let e=e=>{let c=document.querySelector(".customerDropdownWrapper");c&&!c.contains(e.target)&&(S(!1),A(""))};return T&&document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[T]);let E=e.filter(e=>e.toLowerCase().includes(_.toLowerCase()));return(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc safeArea",children:[(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc header",children:[(0,s.jsx)(l.default,{src:"/webbuild/images/usericon.png",alt:"User Icon",width:55,height:55}),(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc user-text",children:[(0,s.jsx)("p",{className:"jsx-9cfec7ba5fde27dc helloname",children:"Hello,"}),(0,s.jsx)("p",{className:"jsx-9cfec7ba5fde27dc username",children:P})]}),(0,s.jsx)("button",{onClick:()=>console.log("Logout"),className:"jsx-9cfec7ba5fde27dc",children:(0,s.jsx)(l.default,{src:"/webbuild/images/Logout.png",alt:"Logout",width:25,height:25})})]}),(0,s.jsx)("div",{className:"jsx-9cfec7ba5fde27dc separator"}),(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc buttonRow",children:[(0,s.jsx)("button",{onClick:()=>D.push("/customer_ledger"),className:"jsx-9cfec7ba5fde27dc buttonledger",children:"Pending Ledger"}),(0,s.jsx)("button",{onClick:()=>D.push("/CustomerWiseVehicleRecord"),className:"jsx-9cfec7ba5fde27dc buttonledger",children:"CustomerWise Vehicle Details"})]}),(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc container",children:[(0,s.jsx)("h2",{className:"jsx-9cfec7ba5fde27dc pageTitle",children:"Customerwise Vehicle Details"}),(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc selectionContainer",children:[(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc customerDropdownWrapper",children:[(0,s.jsxs)("div",{onClick:()=>S(!T),className:"jsx-9cfec7ba5fde27dc searchableSelect",children:[(0,s.jsx)("span",{className:"jsx-9cfec7ba5fde27dc selectedValue",children:a||"-- Select Customer --"}),(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc icons",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-9cfec7ba5fde27dc",children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"8",className:"jsx-9cfec7ba5fde27dc"}),(0,s.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",className:"jsx-9cfec7ba5fde27dc"})]}),(0,s.jsx)("span",{className:"jsx-9cfec7ba5fde27dc arrow",children:T?"▲":"▼"})]})]}),T&&(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc dropdownList",children:[(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc searchBox",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"jsx-9cfec7ba5fde27dc",children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"8",className:"jsx-9cfec7ba5fde27dc"}),(0,s.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",className:"jsx-9cfec7ba5fde27dc"})]}),(0,s.jsx)("input",{type:"text",placeholder:"Search customer...",value:_,onChange:e=>A(e.target.value),onClick:e=>e.stopPropagation(),autoFocus:!0,className:"jsx-9cfec7ba5fde27dc"})]}),(0,s.jsx)("div",{className:"jsx-9cfec7ba5fde27dc options",children:E.length>0?E.map(e=>(0,s.jsx)("div",{onClick:()=>{d(e),S(!1),A("")},className:"jsx-9cfec7ba5fde27dc option",children:e},e)):(0,s.jsx)("div",{className:"jsx-9cfec7ba5fde27dc noResults",children:"No customers found"})})]})]}),(0,s.jsx)("input",{type:"date",value:r,onChange:e=>b(e.target.value),className:"jsx-9cfec7ba5fde27dc datePicker"}),(0,s.jsx)("input",{type:"date",value:h,onChange:e=>m(e.target.value),className:"jsx-9cfec7ba5fde27dc datePicker"}),(0,s.jsx)("button",{onClick:()=>{if(!a){alert("Please select a customer");return}w(!0);let e=new URL("http://15.207.48.53:3000/cleared-details");e.searchParams.set("customer_name",a),r&&h&&(e.searchParams.set("start_date",r),e.searchParams.set("end_date",h)),fetch(e.toString()).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{let c=e.data||[];j(c);let a=c.reduce((e,c)=>e+parseFloat(c.agreed_amount||"0"),0),s=c.reduce((e,c)=>e+parseFloat(c.total_expenses||"0"),0);N(a),v(s),C(a-s)}).catch(e=>console.error("Error fetching data:",e)).finally(()=>w(!1))},className:"jsx-9cfec7ba5fde27dc button",children:"Fetch Data"})]}),g&&(0,s.jsx)("p",{className:"jsx-9cfec7ba5fde27dc loadingText",children:"Loading..."}),u.length>0&&!g&&(0,s.jsxs)("div",{className:"jsx-9cfec7ba5fde27dc totalContainer",children:[(0,s.jsxs)("p",{className:"jsx-9cfec7ba5fde27dc totalText",children:["Net Amount: Rs.",k.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9cfec7ba5fde27dc totalText",children:["Total Expenses: Rs.",y.toFixed(2)]}),(0,s.jsxs)("p",{className:"jsx-9cfec7ba5fde27dc totalText",children:["Profit: Rs.",z.toFixed(2)]})]}),u.length>0&&!g&&(0,s.jsx)("button",{onClick:()=>{let e=new f.default("landscape");p()(e,{head:[["ID","Vehicle Number","Agreed Amount","Issued To","Address","Cleared At"]],body:u.map(e=>[e.id,e.vehicle_number,"Rs.".concat(parseFloat(e.agreed_amount||"0").toFixed(2)),e.issued_to,e.address||"N/A",i()(e.cleared_at).format("DD-MM-YYYY")])}),e.save("CustomerWiseVehicleDetails.pdf")},className:"jsx-9cfec7ba5fde27dc button",children:"Print PDF"}),u.length>0?(0,s.jsx)("div",{className:"jsx-9cfec7ba5fde27dc tableContainer",children:(0,s.jsxs)("table",{className:"jsx-9cfec7ba5fde27dc recordsTable",children:[(0,s.jsx)("thead",{className:"jsx-9cfec7ba5fde27dc",children:(0,s.jsxs)("tr",{className:"jsx-9cfec7ba5fde27dc",children:[(0,s.jsx)("th",{className:"jsx-9cfec7ba5fde27dc",children:"ID"}),(0,s.jsx)("th",{className:"jsx-9cfec7ba5fde27dc",children:"Vehicle No."}),(0,s.jsx)("th",{className:"jsx-9cfec7ba5fde27dc",children:"Agreed Amount"}),(0,s.jsx)("th",{className:"jsx-9cfec7ba5fde27dc",children:"Issued To"}),(0,s.jsx)("th",{className:"jsx-9cfec7ba5fde27dc",children:"Address"}),(0,s.jsx)("th",{className:"jsx-9cfec7ba5fde27dc",children:"Cleared At"})]})}),(0,s.jsx)("tbody",{className:"jsx-9cfec7ba5fde27dc",children:u.map(e=>(0,s.jsxs)("tr",{className:"jsx-9cfec7ba5fde27dc",children:[(0,s.jsx)("td",{className:"jsx-9cfec7ba5fde27dc",children:e.id}),(0,s.jsx)("td",{className:"jsx-9cfec7ba5fde27dc",children:e.vehicle_number}),(0,s.jsxs)("td",{className:"jsx-9cfec7ba5fde27dc",children:["Rs.",parseFloat(e.agreed_amount||"0").toFixed(2)]}),(0,s.jsx)("td",{className:"jsx-9cfec7ba5fde27dc",children:e.issued_to}),(0,s.jsx)("td",{className:"jsx-9cfec7ba5fde27dc",children:e.address||"N/A"}),(0,s.jsx)("td",{className:"jsx-9cfec7ba5fde27dc",children:i()(e.cleared_at).format("DD-MM-YYYY")})]},"".concat(e.id,"-").concat(e.address||"N/A")))})]})}):!g&&(0,s.jsx)("p",{className:"jsx-9cfec7ba5fde27dc",children:"No data available"})]}),(0,s.jsx)(t(),{id:"9cfec7ba5fde27dc",children:".safeArea.jsx-9cfec7ba5fde27dc{min-height:100vh;background-color:#f8f8f8}.header.jsx-9cfec7ba5fde27dc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:20px}.user-text.jsx-9cfec7ba5fde27dc{margin-right:auto;padding-left:10px}.helloname.jsx-9cfec7ba5fde27dc{margin:0;font-size:14px}.username.jsx-9cfec7ba5fde27dc{margin:0;font-size:16px;font-weight:bold;color:darkslategrey}.separator.jsx-9cfec7ba5fde27dc{margin:25px 20px 10px 20px;border-bottom:1px solid#000}.buttonRow.jsx-9cfec7ba5fde27dc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-webkit-justify-content:left;-moz-box-pack:left;-ms-flex-pack:left;justify-content:left;gap:10px;margin:10px 20px}.buttonledger.jsx-9cfec7ba5fde27dc{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:150px;height:42px;cursor:pointer}.container.jsx-9cfec7ba5fde27dc{padding:20px;text-align:center}.pageTitle.jsx-9cfec7ba5fde27dc{font-size:16px;font-weight:bold;margin:10px 0 30px}.selectionContainer.jsx-9cfec7ba5fde27dc{margin:0 auto 20px;width:90%;padding:5px;border:2px solid black;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:10px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.datePicker.jsx-9cfec7ba5fde27dc{height:56px;width:200px;border:1px solid#ccc;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;padding:5px;font-size:16px}.button.jsx-9cfec7ba5fde27dc{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:200px;font-weight:bold;cursor:pointer}.loadingText.jsx-9cfec7ba5fde27dc{font-size:18px;font-weight:bold;color:#4caf50;margin-top:20px}.totalContainer.jsx-9cfec7ba5fde27dc{background-color:#fff;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);width:100%;margin:20px auto;text-align:center}.totalText.jsx-9cfec7ba5fde27dc{font-size:16px;font-weight:bold;margin-bottom:10px;color:#333}.tableContainer.jsx-9cfec7ba5fde27dc{margin:20px 0;border:1px solid#e0e0e0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.05);-moz-box-shadow:0 2px 4px rgba(0,0,0,.05);box-shadow:0 2px 4px rgba(0,0,0,.05);overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:10px}.recordsTable.jsx-9cfec7ba5fde27dc{width:100%;min-width:800px;border-collapse:collapse;background:white;font-size:15px;white-space:nowrap}.recordsTable.jsx-9cfec7ba5fde27dc th.jsx-9cfec7ba5fde27dc{background-color:#841584;color:white;font-weight:bold;padding:12px 15px;text-align:center;position:-webkit-sticky;position:sticky;top:0;z-index:10;font-size:15px}.recordsTable.jsx-9cfec7ba5fde27dc td.jsx-9cfec7ba5fde27dc{padding:12px 15px;border-bottom:1px solid#f0f0f0;color:#333;font-size:14px}.recordsTable.jsx-9cfec7ba5fde27dc tr.jsx-9cfec7ba5fde27dc:nth-child(even){background-color:#f9f9f9}.recordsTable.jsx-9cfec7ba5fde27dc tr.jsx-9cfec7ba5fde27dc:hover{background-color:#f5f5f5}.recordsTable.jsx-9cfec7ba5fde27dc td.jsx-9cfec7ba5fde27dc:nth-child(1),.recordsTable.jsx-9cfec7ba5fde27dc td.jsx-9cfec7ba5fde27dc:nth-child(3),.recordsTable.jsx-9cfec7ba5fde27dc td.jsx-9cfec7ba5fde27dc:nth-child(5){text-align:right}.recordsTable.jsx-9cfec7ba5fde27dc th.jsx-9cfec7ba5fde27dc:nth-child(1),.recordsTable.jsx-9cfec7ba5fde27dc th.jsx-9cfec7ba5fde27dc:nth-child(3),.recordsTable.jsx-9cfec7ba5fde27dc th.jsx-9cfec7ba5fde27dc:nth-child(5){text-align:right}.customerDropdownWrapper.jsx-9cfec7ba5fde27dc{position:relative;width:300px}.searchableSelect.jsx-9cfec7ba5fde27dc{height:56px;width:100%;border:1px solid#ccc;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;padding:0 15px;font-size:16px;background:white;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;-webkit-box-shadow:0 2px 5px rgba(0,0,0,.1);-moz-box-shadow:0 2px 5px rgba(0,0,0,.1);box-shadow:0 2px 5px rgba(0,0,0,.1)}.selectedValue.jsx-9cfec7ba5fde27dc{color:#333;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:70%}.icons.jsx-9cfec7ba5fde27dc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:10px;color:#666}.arrow.jsx-9cfec7ba5fde27dc{font-size:12px}.dropdownList.jsx-9cfec7ba5fde27dc{position:absolute;top:65px;left:0;right:0;background:white;border:1px solid#ccc;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;-webkit-box-shadow:0 10px 20px rgba(0,0,0,.15);-moz-box-shadow:0 10px 20px rgba(0,0,0,.15);box-shadow:0 10px 20px rgba(0,0,0,.15);z-index:1000;max-height:300px;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.searchBox.jsx-9cfec7ba5fde27dc{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:12px;border-bottom:1px solid#eee;gap:10px}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc{border:none;outline:none;font-size:16px;width:100%}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc::-webkit-input-placeholder{color:#aaa}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc:-moz-placeholder{color:#aaa}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc::-moz-placeholder{color:#aaa}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc:-ms-input-placeholder{color:#aaa}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc::-ms-input-placeholder{color:#aaa}.searchBox.jsx-9cfec7ba5fde27dc input.jsx-9cfec7ba5fde27dc::placeholder{color:#aaa}.options.jsx-9cfec7ba5fde27dc{overflow-y:auto;max-height:240px}.option.jsx-9cfec7ba5fde27dc{padding:12px 20px;cursor:pointer;-webkit-transition:background.2s;-moz-transition:background.2s;-o-transition:background.2s;transition:background.2s}.option.jsx-9cfec7ba5fde27dc:hover{background-color:#f0e6ff}.noResults.jsx-9cfec7ba5fde27dc{padding:20px;text-align:center;color:#999;font-style:italic}"})]})}},93004:(e,c,a)=>{"use strict";a.d(c,{K6:()=>t,dr:()=>s,jI:()=>d});let s={TempforViewing:null,totalPendingAmount:0,UserName:"OmSai",totalCount:0},d=()=>{try{let e=localStorage.getItem("totalPendingAmount"),c=localStorage.getItem("totalCount");null!==e&&(s.totalPendingAmount=Number(e)),null!==c&&(s.totalCount=Number(c))}catch(e){console.error("Error loading global state:",e)}},t=()=>{try{localStorage.setItem("totalPendingAmount",String(s.totalPendingAmount)),localStorage.setItem("totalCount",String(s.totalCount))}catch(e){console.error("Error saving global state:",e)}}}},e=>{var c=c=>e(e.s=c);e.O(0,[586,3930,5565,4091,8441,1517,7358],()=>c(52958)),_N_E=e.O()}]);