(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8184],{77587:(e,s,t)=>{Promise.resolve().then(t.bind(t,97731))},97731:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(95155),d=t(58803),r=t.n(d),o=t(12115),b=t(13691),l=t.n(b),i=t(5565),n=t(76046),x=t(93004),f=t(10142),c=t(92340),p=t.n(c);let h=()=>{let[e,s]=(0,o.useState)([]),[t,d]=(0,o.useState)(""),[b,c]=(0,o.useState)(""),[h,j]=(0,o.useState)(""),[u,m]=(0,o.useState)([]),[g,w]=(0,o.useState)(!1),[k,N]=(0,o.useState)(0),[y,T]=(0,o.useState)(0),[v,C]=(0,o.useState)(0),z=x.dr.UserName,_=(0,n.useRouter)();return(0,o.useEffect)(()=>{fetch("http://15.207.48.53:3000/unique-customers").then(e=>{if(!e.ok)throw Error("Failed to fetch customers");return e.json()}).then(e=>s(e.customers||[])).catch(e=>console.error("Error fetching customers:",e))},[]),(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 safeArea",children:[(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 header",children:[(0,a.jsx)(i.default,{src:"/webbuild/images/usericon.png",alt:"User Icon",width:55,height:55}),(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 user-text",children:[(0,a.jsx)("p",{className:"jsx-dbbf375f92118222 helloname",children:"Hello,"}),(0,a.jsx)("p",{className:"jsx-dbbf375f92118222 username",children:z})]}),(0,a.jsx)("button",{onClick:()=>console.log("Logout"),className:"jsx-dbbf375f92118222",children:(0,a.jsx)(i.default,{src:"/webbuild/images/Logout.png",alt:"Logout",width:25,height:25})})]}),(0,a.jsx)("div",{className:"jsx-dbbf375f92118222 separator"}),(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 buttonRow",children:[(0,a.jsx)("button",{onClick:()=>_.push("/customer_ledger"),className:"jsx-dbbf375f92118222 buttonledger",children:"Pending Ledger"}),(0,a.jsx)("button",{onClick:()=>_.push("/CustomerWiseVehicleRecord"),className:"jsx-dbbf375f92118222 buttonledger",children:"CustomerWise Vehicle Details"})]}),(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 container",children:[(0,a.jsx)("h2",{className:"jsx-dbbf375f92118222 pageTitle",children:"Customerwise Vehicle Details"}),(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 selectionContainer",children:[(0,a.jsxs)("select",{value:t,onChange:e=>d(e.target.value),className:"jsx-dbbf375f92118222 picker",children:[(0,a.jsx)("option",{value:"",className:"jsx-dbbf375f92118222",children:"-- Select Customer --"}),e.map(e=>(0,a.jsx)("option",{value:e,className:"jsx-dbbf375f92118222",children:e},e))]}),(0,a.jsx)("input",{type:"date",value:b,onChange:e=>c(e.target.value),className:"jsx-dbbf375f92118222 datePicker"}),(0,a.jsx)("input",{type:"date",value:h,onChange:e=>j(e.target.value),className:"jsx-dbbf375f92118222 datePicker"}),(0,a.jsx)("button",{onClick:()=>{if(!t){alert("Please select a customer");return}w(!0);let e=new URL("http://15.207.48.53:3000/cleared-details");e.searchParams.set("customer_name",t),b&&h&&(e.searchParams.set("start_date",b),e.searchParams.set("end_date",h)),fetch(e.toString()).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.json()}).then(e=>{let s=e.data||[];m(s);let t=s.reduce((e,s)=>e+parseFloat(s.agreed_amount||"0"),0),a=s.reduce((e,s)=>e+parseFloat(s.total_expenses||"0"),0);N(t),T(a),C(t-a)}).catch(e=>console.error("Error fetching data:",e)).finally(()=>w(!1))},className:"jsx-dbbf375f92118222 button",children:"Fetch Data"})]}),g&&(0,a.jsx)("p",{className:"jsx-dbbf375f92118222 loadingText",children:"Loading..."}),u.length>0&&!g&&(0,a.jsxs)("div",{className:"jsx-dbbf375f92118222 totalContainer",children:[(0,a.jsxs)("p",{className:"jsx-dbbf375f92118222 totalText",children:["Net Amount: Rs.",k.toFixed(2)]}),(0,a.jsxs)("p",{className:"jsx-dbbf375f92118222 totalText",children:["Total Expenses: Rs.",y.toFixed(2)]}),(0,a.jsxs)("p",{className:"jsx-dbbf375f92118222 totalText",children:["Profit: Rs.",v.toFixed(2)]})]}),u.length>0&&!g&&(0,a.jsx)("button",{onClick:()=>{let e=new f.default("landscape");p()(e,{head:[["ID","Vehicle Number","Agreed Amount","Issued To","Address","Cleared At"]],body:u.map(e=>[e.id,e.vehicle_number,"Rs.".concat(parseFloat(e.agreed_amount||"0").toFixed(2)),e.issued_to,e.address||"N/A",l()(e.cleared_at).format("DD-MM-YYYY")])}),e.save("CustomerWiseVehicleDetails.pdf")},className:"jsx-dbbf375f92118222 button",children:"Print PDF"}),u.length>0?(0,a.jsx)("div",{className:"jsx-dbbf375f92118222 tableContainer",children:(0,a.jsxs)("table",{className:"jsx-dbbf375f92118222 recordsTable",children:[(0,a.jsx)("thead",{className:"jsx-dbbf375f92118222",children:(0,a.jsxs)("tr",{className:"jsx-dbbf375f92118222",children:[(0,a.jsx)("th",{className:"jsx-dbbf375f92118222",children:"ID"}),(0,a.jsx)("th",{className:"jsx-dbbf375f92118222",children:"Vehicle No."}),(0,a.jsx)("th",{className:"jsx-dbbf375f92118222",children:"Agreed Amount"}),(0,a.jsx)("th",{className:"jsx-dbbf375f92118222",children:"Issued To"}),(0,a.jsx)("th",{className:"jsx-dbbf375f92118222",children:"Address"}),(0,a.jsx)("th",{className:"jsx-dbbf375f92118222",children:"Cleared At"})]})}),(0,a.jsx)("tbody",{className:"jsx-dbbf375f92118222",children:u.map(e=>(0,a.jsxs)("tr",{className:"jsx-dbbf375f92118222",children:[(0,a.jsx)("td",{className:"jsx-dbbf375f92118222",children:e.id}),(0,a.jsx)("td",{className:"jsx-dbbf375f92118222",children:e.vehicle_number}),(0,a.jsxs)("td",{className:"jsx-dbbf375f92118222",children:["Rs.",parseFloat(e.agreed_amount||"0").toFixed(2)]}),(0,a.jsx)("td",{className:"jsx-dbbf375f92118222",children:e.issued_to}),(0,a.jsx)("td",{className:"jsx-dbbf375f92118222",children:e.address||"N/A"}),(0,a.jsx)("td",{className:"jsx-dbbf375f92118222",children:l()(e.cleared_at).format("DD-MM-YYYY")})]},"".concat(e.id,"-").concat(e.address||"N/A")))})]})}):!g&&(0,a.jsx)("p",{className:"jsx-dbbf375f92118222",children:"No data available"})]}),(0,a.jsx)(r(),{id:"dbbf375f92118222",children:".safeArea.jsx-dbbf375f92118222{min-height:100vh;background-color:#f8f8f8}.header.jsx-dbbf375f92118222{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:20px}.user-text.jsx-dbbf375f92118222{margin-right:auto;padding-left:10px}.helloname.jsx-dbbf375f92118222{margin:0;font-size:14px}.username.jsx-dbbf375f92118222{margin:0;font-size:16px;font-weight:bold;color:darkslategrey}.logout-button.jsx-dbbf375f92118222{background:none;border:none;cursor:pointer}.separator.jsx-dbbf375f92118222{margin:25px 20px 10px 20px;border-bottom:1px solid#000}.buttonRow.jsx-dbbf375f92118222{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-webkit-justify-content:left;-moz-box-pack:left;-ms-flex-pack:left;justify-content:left;gap:10px;margin:10px 20px}.buttonledger.jsx-dbbf375f92118222{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:150px;height:42px;cursor:pointer}.container.jsx-dbbf375f92118222{padding:20px;text-align:center}.pageTitle.jsx-dbbf375f92118222{font-size:16px;font-weight:bold;margin:10px 0 30px}.selectionContainer.jsx-dbbf375f92118222{margin:0 auto 20px;width:90%;padding:5px;border:2px solid black;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:10px}.picker.jsx-dbbf375f92118222,.datePicker.jsx-dbbf375f92118222{height:56px;width:200px;border:1px solid#ccc;-webkit-border-radius:25px;-moz-border-radius:25px;border-radius:25px;padding:5px;font-size:16px}.button.jsx-dbbf375f92118222{background-color:#841584;color:white;padding:12px;border:none;-webkit-border-radius:15px;-moz-border-radius:15px;border-radius:15px;width:200px;font-weight:bold;cursor:pointer}.loadingText.jsx-dbbf375f92118222{font-size:18px;font-weight:bold;color:#4caf50;margin-top:20px}.totalContainer.jsx-dbbf375f92118222{background-color:#fff;padding:15px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);width:100%;margin:20px auto;text-align:center}.totalText.jsx-dbbf375f92118222{font-size:16px;font-weight:bold;margin-bottom:10px;color:#333}.actionContainer.jsx-dbbf375f92118222{margin:10px 0;text-align:center}.tableContainer.jsx-dbbf375f92118222{margin:20px 0;border:1px solid#e0e0e0;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;overflow:hidden;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.05);-moz-box-shadow:0 2px 4px rgba(0,0,0,.05);box-shadow:0 2px 4px rgba(0,0,0,.05)}.recordsTable.jsx-dbbf375f92118222{width:100%;border-collapse:collapse;background:white;font-size:15px}.recordsTable.jsx-dbbf375f92118222 th.jsx-dbbf375f92118222{background-color:#841584;color:white;font-weight:bold;padding:12px 15px;text-align:center;position:-webkit-sticky;position:sticky;top:0;font-size:15px}.recordsTable.jsx-dbbf375f92118222 th.jsx-dbbf375f92118222:nth-child(2),.recordsTable.jsx-dbbf375f92118222 td.jsx-dbbf375f92118222:nth-child(2),.recordsTable.jsx-dbbf375f92118222 th.jsx-dbbf375f92118222:nth-child(3),.recordsTable.jsx-dbbf375f92118222 td.jsx-dbbf375f92118222:nth-child(3){padding-left:5px;padding-right:5px}.recordsTable.jsx-dbbf375f92118222 td.jsx-dbbf375f92118222{padding:12px 15px;border-bottom:1px solid#f0f0f0;color:#333;font-size:14px}.recordsTable.jsx-dbbf375f92118222 tr.jsx-dbbf375f92118222:nth-child(even){background-color:#f9f9f9}.recordsTable.jsx-dbbf375f92118222 tr.jsx-dbbf375f92118222:hover{background-color:#f5f5f5}.recordsTable.jsx-dbbf375f92118222 td.jsx-dbbf375f92118222:nth-child(1),.recordsTable.jsx-dbbf375f92118222 td.jsx-dbbf375f92118222:nth-child(3),.recordsTable.jsx-dbbf375f92118222 td.jsx-dbbf375f92118222:nth-child(5){text-align:right}.recordsTable.jsx-dbbf375f92118222 th.jsx-dbbf375f92118222:nth-child(1),.recordsTable.jsx-dbbf375f92118222 th.jsx-dbbf375f92118222:nth-child(3),.recordsTable.jsx-dbbf375f92118222 th.jsx-dbbf375f92118222:nth-child(5){text-align:right}"})]})}},93004:(e,s,t)=>{"use strict";t.d(s,{K6:()=>r,dr:()=>a,jI:()=>d});let a={TempforViewing:null,totalPendingAmount:0,UserName:"OmSai",totalCount:0},d=()=>{try{let e=localStorage.getItem("totalPendingAmount"),s=localStorage.getItem("totalCount");null!==e&&(a.totalPendingAmount=Number(e)),null!==s&&(a.totalCount=Number(s))}catch(e){console.error("Error loading global state:",e)}},r=()=>{try{localStorage.setItem("totalPendingAmount",String(a.totalPendingAmount)),localStorage.setItem("totalCount",String(a.totalCount))}catch(e){console.error("Error saving global state:",e)}}}},e=>{var s=s=>e(e.s=s);e.O(0,[586,3930,5565,4091,8441,1517,7358],()=>s(77587)),_N_E=e.O()}]);