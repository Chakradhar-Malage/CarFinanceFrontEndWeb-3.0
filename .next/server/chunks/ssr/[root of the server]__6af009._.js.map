{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/chaku/OneDrive/Desktop/CarFinanceFrontendWeb/src/app/GenerateInvoice/page.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  TextField,\r\n  Typography,\r\n} from \"@mui/material\";\r\n\r\ninterface Customer {\r\n  name: string;\r\n  mobile: string;\r\n  address: string;\r\n  gstin: string;\r\n}\r\n\r\ninterface Product {\r\n  name: string;\r\n  quantity: string;\r\n  rate: string;\r\n  gst: string;\r\n  hsn: string;\r\n}\r\n\r\nconst GenerateInvoice = () => {\r\n  const [isNewCustomer, setIsNewCustomer] = useState(true);\r\n  const [customerDetails, setCustomerDetails] = useState<Customer>({\r\n    name: \"\",\r\n    mobile: \"\",\r\n    address: \"\",\r\n    gstin: \"\",\r\n  });\r\n  const [customersList, setCustomersList] = useState<Customer[]>([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState<Customer | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [products, setProducts] = useState<Product[]>([\r\n    { name: \"\", quantity: \"\", rate: \"\", gst: \"18\", hsn: \"998717\" },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://15.207.48.53:3000/customers\")\r\n      .then((response) => {\r\n        setCustomersList(response.data as Customer[]);\r\n      })\r\n      .catch((error) => console.error(\"Error fetching customers:\", error));\r\n  }, []);\r\n\r\n  const handleCustomerChange = (key: keyof Customer, value: string) => {\r\n    setCustomerDetails(prev => ({ ...prev, [key]: value }));\r\n  };\r\n\r\n  const handleExistingCustomerSearch = () => {\r\n    const matchedCustomer = customersList.find(\r\n      (customer) =>\r\n        customer.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n        customer.mobile.includes(searchQuery)\r\n    );\r\n    \r\n    if (matchedCustomer) {\r\n      setSelectedCustomer(matchedCustomer);\r\n      setCustomerDetails(matchedCustomer);\r\n    } else {\r\n      alert(\"No customer matches your search.\");\r\n    }\r\n  };\r\n\r\n  const addProduct = () => {\r\n    setProducts(prev => [\r\n      ...prev,\r\n      { name: \"\", quantity: \"\", rate: \"\", gst: \"18\", hsn: \"998717\" },\r\n    ]);\r\n  };\r\n\r\n  const deleteProduct = (index: number) => {\r\n    setProducts(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const generateInvoice = async () => {\r\n    try {\r\n      const response = await axios.post(\"http://15.207.48.53:3000/generate-bill\", {\r\n        customerName: customerDetails.name,\r\n        customerMobile: customerDetails.mobile,\r\n        customerAddress: customerDetails.address,\r\n        customerGstin: customerDetails.gstin,\r\n        products: products.map((product) => ({\r\n          name: product.name,\r\n          quantity: parseFloat(product.quantity),\r\n          rate: parseFloat(product.rate),\r\n          gst: parseFloat(product.gst),\r\n          hsn: product.hsn,\r\n        })),\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        alert(\"Invoice generated successfully!\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error generating invoice:\", error);\r\n      alert(\"Failed to generate invoice.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex gap-4 mb-6\">\r\n        <Button\r\n          variant={isNewCustomer ? \"contained\" : \"outlined\"}\r\n          onClick={() => setIsNewCustomer(true)}\r\n          sx={{ backgroundColor: \"#841584\", color: \"#fff\" }}\r\n        >\r\n          New Customer\r\n        </Button>\r\n        <Button\r\n          variant={!isNewCustomer ? \"contained\" : \"outlined\"}\r\n          onClick={() => setIsNewCustomer(false)}\r\n          sx={{ backgroundColor: \"#841584\", color: \"#fff\" }}\r\n        >\r\n          Existing Customer\r\n        </Button>\r\n      </div>\r\n\r\n      {isNewCustomer ? (\r\n        <Card className=\"mb-6\">\r\n          <CardContent>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              New Customer Details\r\n            </Typography>\r\n            {([\"name\", \"mobile\", \"address\", \"gstin\"] as (keyof Customer)[]).map((field) => (\r\n              <TextField\r\n                key={field}\r\n                label={`Customer ${field.charAt(0).toUpperCase() + field.slice(1)}`}\r\n                value={customerDetails[field]}\r\n                onChange={(e) => handleCustomerChange(field, e.target.value)}\r\n                fullWidth\r\n                margin=\"normal\"\r\n                type={field === \"mobile\" ? \"number\" : \"text\"}\r\n                inputProps={field === \"gstin\" ? { style: { textTransform: \"uppercase\" } } : {}}\r\n              />\r\n            ))}\r\n          </CardContent>\r\n        </Card>\r\n      ) : (\r\n        <>\r\n          <Card className=\"mb-6\">\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Search Existing Customer\r\n              </Typography>\r\n              <TextField\r\n                label=\"Search by name or mobile\"\r\n                value={searchQuery}\r\n                onChange={(e) => setSearchQuery(e.target.value)}\r\n                fullWidth\r\n                margin=\"normal\"\r\n              />\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleExistingCustomerSearch}\r\n                className=\"mt-4\"\r\n              >\r\n                Search\r\n              </Button>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {selectedCustomer && (\r\n            <Card className=\"mb-6\">\r\n              <CardContent>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  Customer Details\r\n                </Typography>\r\n                {([\"name\", \"mobile\", \"address\", \"gstin\"] as (keyof Customer)[]).map((field) => (\r\n                  <TextField\r\n                    key={field}\r\n                    label={`Customer ${field.charAt(0).toUpperCase() + field.slice(1)}`}\r\n                    value={customerDetails[field]}\r\n                    onChange={(e) => handleCustomerChange(field, e.target.value)}\r\n                    fullWidth\r\n                    margin=\"normal\"\r\n                  />\r\n                ))}\r\n              </CardContent>\r\n            </Card>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      <Card className=\"mb-6\">\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Products\r\n          </Typography>\r\n          {products.map((product, index) => (\r\n            <Card key={index} className=\"mb-4\">\r\n              <CardContent>\r\n                <Typography variant=\"subtitle1\" gutterBottom>\r\n                  Product {index + 1}\r\n                </Typography>\r\n                <TextField\r\n                  label=\"Product Name\"\r\n                  value={product.name}\r\n                  onChange={(e) => {\r\n                    const updatedProducts = [...products];\r\n                    updatedProducts[index].name = e.target.value;\r\n                    setProducts(updatedProducts);\r\n                  }}\r\n                  fullWidth\r\n                  margin=\"normal\"\r\n                />\r\n                <div className=\"grid grid-cols-2 gap-4\">\r\n                  <TextField\r\n                    label=\"Quantity\"\r\n                    type=\"number\"\r\n                    value={product.quantity}\r\n                    onChange={(e) => {\r\n                      const updatedProducts = [...products];\r\n                      updatedProducts[index].quantity = e.target.value;\r\n                      setProducts(updatedProducts);\r\n                    }}\r\n                    margin=\"normal\"\r\n                  />\r\n                  <TextField\r\n                    label=\"Rate\"\r\n                    type=\"number\"\r\n                    value={product.rate}\r\n                    onChange={(e) => {\r\n                      const updatedProducts = [...products];\r\n                      updatedProducts[index].rate = e.target.value;\r\n                      setProducts(updatedProducts);\r\n                    }}\r\n                    margin=\"normal\"\r\n                  />\r\n                  <TextField\r\n                    label=\"GST (%)\"\r\n                    type=\"number\"\r\n                    value={product.gst}\r\n                    onChange={(e) => {\r\n                      const updatedProducts = [...products];\r\n                      updatedProducts[index].gst = e.target.value;\r\n                      setProducts(updatedProducts);\r\n                    }}\r\n                    margin=\"normal\"\r\n                  />\r\n                  <TextField\r\n                    label=\"HSN Code\"\r\n                    type=\"number\"\r\n                    value={product.hsn}\r\n                    onChange={(e) => {\r\n                      const updatedProducts = [...products];\r\n                      updatedProducts[index].hsn = e.target.value;\r\n                      setProducts(updatedProducts);\r\n                    }}\r\n                    margin=\"normal\"\r\n                  />\r\n                </div>\r\n              </CardContent>\r\n              <CardActions>\r\n                <Button\r\n                  color=\"error\"\r\n                  onClick={() => deleteProduct(index)}\r\n                >\r\n                  Delete Product\r\n                </Button>\r\n              </CardActions>\r\n            </Card>\r\n          ))}\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={addProduct}\r\n            className=\"mt-4\"\r\n          >\r\n            Add Product\r\n          </Button>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <Button\r\n        variant=\"contained\"\r\n        sx={{ backgroundColor: \"#841584\" }}\r\n        onClick={generateInvoice}\r\n        fullWidth\r\n        size=\"large\"\r\n      >\r\n        Generate Invoice\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GenerateInvoice;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 572, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}