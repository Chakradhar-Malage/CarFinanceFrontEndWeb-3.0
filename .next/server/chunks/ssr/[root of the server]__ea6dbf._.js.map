{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/chaku/OneDrive/Desktop/CarFinanceFrontendWeb/src/app/ViewNonGSTinvoices/page.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\n\r\n\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useRouter } from 'next/navigation';\r\nimport { FaTrash } from 'react-icons/fa';\r\nimport Image from 'next/image';\r\n\r\nconst ViewNonGSTInvoices = () => {\r\n  const [invoices, setInvoices] = useState<any[]>([]);\r\n  const [searchName, setSearchName] = useState('');\r\n  const [filteredInvoices, setFilteredInvoices] = useState<any[]>([]);\r\n  const router = useRouter();\r\n\r\n  // Component to format a date string for display (MM/DD/YYYY at HH:mm:ss)\r\n  const FormattedDate = ({ dateString }: { dateString: string }) => {\r\n    const date = new Date(dateString);\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0'); // Month is zero-indexed\r\n    const year = date.getFullYear();\r\n    const hours = String(date.getHours()).padStart(2, '0');\r\n    const minutes = String(date.getMinutes()).padStart(2, '0');\r\n    const seconds = String(date.getSeconds()).padStart(2, '0');\r\n    return (\r\n      <span>\r\n        {month}/{day}/{year} at {hours}:{minutes}:{seconds}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  // Function to format a date string for use in URLs (YYYY-MM-DD HH:mm:ss)\r\n  const formatDateForUrl = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    const day = String(date.getDate()).padStart(2, '0');\r\n    const month = String(date.getMonth() + 1).padStart(2, '0');\r\n    const year = date.getFullYear();\r\n    const hours = String(date.getHours()).padStart(2, '0');\r\n    const minutes = String(date.getMinutes()).padStart(2, '0');\r\n    const seconds = String(date.getSeconds()).padStart(2, '0');\r\n    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchInvoices();\r\n  }, []);\r\n\r\n  const fetchInvoices = async () => {\r\n    try {\r\n      const response = await axios.get('http://72.61.245.17:3000/allnongstinvoices');\r\n      setInvoices(response.data as any[]);\r\n      setFilteredInvoices(response.data as any[]);\r\n    } catch (error) {\r\n      console.error('Error fetching invoices:', error);\r\n    }\r\n  };\r\n\r\n  const searchByCustomer = async () => {\r\n    if (!searchName) {\r\n      window.alert('Please enter a customer name.');\r\n      return;\r\n    }\r\n    try {\r\n      const response = await axios.get(\r\n        `http://72.61.245.17:3000/nongstinvoices/customer/${searchName}`\r\n      );\r\n      setFilteredInvoices(response.data as any[]);\r\n    } catch (error) {\r\n      console.error('Error searching invoices:', error);\r\n      window.alert('No invoices found for this customer.');\r\n    }\r\n  };\r\n\r\n  // Function to open the download URL in a new browser tab\r\n  const openInBrowser = (customerName: string, createdAt: string) => {\r\n    const formattedDate = formatDateForUrl(createdAt);\r\n    const encodedCreatedAt = encodeURIComponent(formattedDate);\r\n    const url = `http://72.61.245.17:3000/nongstinvoices/${customerName}/${encodedCreatedAt}/download`;\r\n    window.open(url, '_blank');\r\n  };\r\n\r\n  // Delete function for non-GST invoices\r\n  const deleteNonGstInvoice = async (customerName: string, createdAt: string) => {\r\n    const formattedDate = formatDateForUrl(createdAt);\r\n    const encodedCreatedAt = encodeURIComponent(formattedDate);\r\n    const url = `http://72.61.245.17:3000/deleteNonGstinvoices/${customerName}/${encodedCreatedAt}`;\r\n    try {\r\n      await axios.delete(url);\r\n      window.alert('Invoice deleted successfully');\r\n      setInvoices((prev) =>\r\n        prev.filter(\r\n          (invoice) =>\r\n            invoice.customer_name !== customerName || invoice.created_at !== createdAt\r\n        )\r\n      );\r\n      setFilteredInvoices((prev) =>\r\n        prev.filter(\r\n          (invoice) =>\r\n            invoice.customer_name !== customerName || invoice.created_at !== createdAt\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error('Error deleting invoice:', error);\r\n      window.alert('Failed to delete invoice');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {/* Header with User Info */}\r\n      <div className=\"header-container\">\r\n        <div className=\"user-img\">\r\n          <Image\r\n            src=\"/webbuild/images/usericon.png\"\r\n            alt=\"User Icon\"\r\n            width={50}\r\n            height={50}\r\n            className=\"usrimg\"\r\n          />\r\n        </div>\r\n        <div className=\"user-info\">\r\n          <p className=\"helloname\">Hello,</p>\r\n          <p className=\"username\">OmSai</p>\r\n        </div>\r\n      </div>\r\n\r\n      <h2>This is Non GST section</h2>\r\n\r\n      {/* Navigation Buttons */}\r\n      <div className=\"buttons-container\">\r\n        <button\r\n          className=\"view-invoices-button\"\r\n          onClick={() => router.push('/GenerateNonGSTInvoice')}\r\n        >\r\n          New Invoice\r\n        </button>\r\n        <button\r\n          className=\"view-invoices-button\"\r\n          onClick={() => router.push('/NonGstBilling_ledger')}\r\n        >\r\n          Billing Ledger\r\n        </button>\r\n      </div>\r\n\r\n      {/* Search Section */}\r\n      <input\r\n        type=\"text\"\r\n        className=\"search-input\"\r\n        placeholder=\"Search by customer name\"\r\n        value={searchName}\r\n        onChange={(e) => setSearchName(e.target.value)}\r\n      />\r\n      <button className=\"search-button\" onClick={searchByCustomer}>\r\n        Search\r\n      </button>\r\n\r\n      {/* Invoice List */}\r\n      <div className=\"invoices-list\">\r\n        {filteredInvoices.map((item, index) => (\r\n          <div key={index} className=\"invoice-item\">\r\n            <div\r\n              className=\"delete-icon\"\r\n              onClick={() => deleteNonGstInvoice(item.customer_name, item.created_at)}\r\n            >\r\n              <FaTrash size={24} color=\"red\" />\r\n            </div>\r\n            <p className=\"invoice-text\">Customer: {item.customer_name}</p>\r\n            <p>\r\n              <FormattedDate dateString={item.created_at} />\r\n            </p>\r\n            <button\r\n              className=\"download-button\"\r\n              onClick={() => openInBrowser(item.customer_name, item.created_at)}\r\n            >\r\n              Download\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Styled JSX for component styling */}\r\n      <style jsx>{`\r\n        .container {\r\n          padding: 20px;\r\n        }\r\n        .header-container {\r\n          display: flex;\r\n          align-items: center;\r\n          margin-bottom: 20px;\r\n        }\r\n        .user-img {\r\n          width: 50px;\r\n          height: 50px;\r\n          border-radius: 20px;\r\n          overflow: hidden;\r\n        }\r\n        .user-info {\r\n          margin-left: 10px;\r\n        }\r\n        .helloname {\r\n          font-size: 14px;\r\n          color: gray;\r\n          margin: 0;\r\n        }\r\n        .username {\r\n          font-size: 18px;\r\n          font-weight: bold;\r\n          color: darkslategrey;\r\n          margin: 0;\r\n        }\r\n        .buttons-container {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          margin-bottom: 20px;\r\n        }\r\n        .view-invoices-button {\r\n          padding: 10px;\r\n          width: 48%;\r\n          background-color: #841584;\r\n          border: none;\r\n          border-radius: 18px;\r\n          color: white;\r\n          font-size: 16px;\r\n          cursor: pointer;\r\n        }\r\n        .search-input {\r\n          height: 40px;\r\n          width: 100%;\r\n          border: 1px solid gray;\r\n          margin-bottom: 12px;\r\n          padding: 8px;\r\n          border-radius: 5px;\r\n          box-sizing: border-box;\r\n        }\r\n        .search-button {\r\n          background-color: #841584;\r\n          padding: 10px 0;\r\n          border: none;\r\n          border-radius: 5px;\r\n          margin-bottom: 20px;\r\n          width: 100%;\r\n          color: white;\r\n          font-size: 16px;\r\n          cursor: pointer;\r\n        }\r\n        .invoice-item {\r\n          position: relative;\r\n          padding: 16px;\r\n          border-bottom: 1px solid gray;\r\n          background-color: #f9f9f9;\r\n          margin: 8px 0;\r\n          border-radius: 5px;\r\n        }\r\n        .invoice-text {\r\n          font-size: 16px;\r\n          margin-bottom: 8px;\r\n        }\r\n        .delete-icon {\r\n          position: absolute;\r\n          top: 8px;\r\n          right: 8px;\r\n          z-index: 1;\r\n          cursor: pointer;\r\n        }\r\n        .download-button {\r\n          background-color: darkslategrey;\r\n          padding: 10px;\r\n          border: none;\r\n          border-radius: 5px;\r\n          margin-top: 10px;\r\n          color: white;\r\n          font-size: 16px;\r\n          cursor: pointer;\r\n          width: 100%;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewNonGSTInvoices;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}