(()=>{var e={};e.id=282,e.ids=[282],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},83997:e=>{"use strict";e.exports=require("tty")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},45892:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>l,routeModule:()=>p,tree:()=>d});var s=a(70260),r=a(28203),i=a(25155),n=a.n(i),o=a(67292),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);a.d(t,c);let d=["",{children:["ViewCarDetails",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,83805)),"C:\\Users\\chaku\\OneDrive\\Desktop\\CarFinanceFrontendWeb\\src\\app\\ViewCarDetails\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,50919))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,71354)),"C:\\Users\\chaku\\OneDrive\\Desktop\\CarFinanceFrontendWeb\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,50919))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["C:\\Users\\chaku\\OneDrive\\Desktop\\CarFinanceFrontendWeb\\src\\app\\ViewCarDetails\\page.tsx"],x={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/ViewCarDetails/page",pathname:"/ViewCarDetails",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4634:(e,t,a)=>{Promise.resolve().then(a.bind(a,83805))},44802:(e,t,a)=>{Promise.resolve().then(a.bind(a,52417))},52417:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(45512),r=a(63),i=a.n(r),n=a(58009),o=a(79334),c=a(85668),d=a(56257),l=a.n(d),x=a(85672),p=a(45103);let u=()=>{let[e,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(!0),d=x.dr.UserName,u=(0,o.useRouter)(),m=x.dr.TempforViewing,[f,g]=(0,n.useState)(""),[b,h]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[v,y]=(0,n.useState)(""),[k,N]=(0,n.useState)(""),[z,C]=(0,n.useState)(""),[D,_]=(0,n.useState)(""),[P,S]=(0,n.useState)(""),[Y,A]=(0,n.useState)([]),[q,I]=(0,n.useState)(!1),[M,E]=(0,n.useState)(!1),[F,V]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!m){window.alert("No vehicle ID found"),r(!1);return}(async()=>{try{let e=await fetch(`http://15.207.48.53:3000/searchById?id=${encodeURIComponent(m)}`),a=await e.json();0===a.length?window.alert("No details found for this vehicle"):(t(a[0]),h(a[0].agreed_amount.toString()),w(a[0].issued_to),y(a[0].address||""),g(a[0].received_amount.toString()),S(a[0].date),_(a[0].driver_expense.toString()),N(a[0].fuel_expense.toString()),C(a[0].maintenance.toString()))}catch(e){console.error("Error fetching data:",e),window.alert("Error fetching data: "+e.message)}finally{r(!1)}})()},[]);let U=async e=>{if(!e||e.trim().length<1){A([]),I(!1);return}E(!0);try{let t=await fetch(`http://15.207.48.53:3000/issued-to-customer-suggestion?name=${encodeURIComponent(e)}`),a=await t.json();A(a.customers||[]),I(!0)}catch(e){console.error("Error fetching customer suggestions:",e),A([])}finally{E(!1)}},O=async()=>{if(!P||""===P.trim()){window.alert("Please enter a valid date before saving.");return}if(!l()(P,"DD/MM/YYYY",!0).isValid()){window.alert("Please enter date in DD/MM/YYYY format.");return}try{let e={};void 0!==b&&""!==b&&(e.agreed_amount=parseInt(b)),void 0!==f&&""!==f&&(e.received_amount=parseInt(f)),void 0!==k&&""!==k&&(e.fuel_expense=parseInt(k)),void 0!==z&&""!==z&&(e.maintenance=parseInt(z)),void 0!==D&&""!==D&&(e.driver_expense=parseInt(D)),void 0!==j&&(e.issued_to=j.trim()||"N/A"),void 0!==v&&(e.address=v.trim()),e.date=P;let t=await c.A.put(`http://15.207.48.53:3000/updateCarDetails/${m}`,e);200===t.status?(window.alert("Car details updated successfully."),u.back()):window.alert("Failed to update car details.")}catch(e){console.error("Error updating car details:",e.response?.data||e.message),window.alert("An error occurred while updating car details.")}},R=l()(P,"DD/MM/YYYY").format("YYYY-MM-DD"),G=async()=>{try{let e=(k?parseInt(k):0)+(D?parseInt(D):0)+(z?parseInt(z):0),t={vehicle_number:m,agreed_amount:parseInt(b)||0,issued_to:j||"N/A",address:v||"N/A",total_expenses:e,cleared_date:R},a=await c.A.post("http://15.207.48.53:3000/saveClearedDetails",t);200===a.status?(window.alert("Details saved successfully."),w("N/A"),y("N/A"),h("0"),g("0"),N("0"),C("0"),_("0"),S("")):window.alert("Failed to save details.")}catch(e){console.error("Error saving cleared details:",e.response?.data||e.message),window.alert("Vehicle is already cleared.")}},W=()=>{let t=b||(e?e.agreed_amount.toString():"0"),a=f||(e?e.received_amount.toString():"0");return parseInt(t,10)-parseInt(a,10)},T=async()=>{let e=W();if(e>0)try{let t=await c.A.post("http://15.207.48.53:3000/processPendingAmount",{vehicleId:m,pending_amount:e,customer_name:j,address:v||"N/A"});if(200===t.status||201===t.status)window.alert("Pending amount processed successfully."),await G(),w("N/A"),y("N/A"),h("0"),g("0"),N("0"),C("0"),_("0"),S("");else{let e=t.data.message;window.alert("Failed to process pending amount: "+e)}}catch(e){console.error("Error processing pending amount:",e.response?.data||e.message),window.alert("An error occurred while processing pending amount: "+(e.response?.data.message||e.message))}else window.alert("Pending amount must be greater than zero.")},$=async()=>{await G(),V(!1)},B=async()=>{await T(),V(!1)};return a?(0,s.jsx)("p",{children:"Loading..."}):e?(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 main-container",children:[(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 header",children:[(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 user-container",children:[(0,s.jsx)(p.default,{src:"/webbuild/images/usericon.png",alt:"User Icon",width:50,height:50,className:"usrimg"}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 header-text",children:[(0,s.jsx)("p",{className:"jsx-c8ae6ed449f64ec5 helloname",children:"Hello,"}),(0,s.jsx)("p",{className:"jsx-c8ae6ed449f64ec5 username",children:d})]})]}),(0,s.jsx)(p.default,{src:"/webbuild/images/Logout.png",alt:"logout",width:25,height:25,className:"logoutimg"})]}),(0,s.jsx)("hr",{className:"jsx-c8ae6ed449f64ec5 separator"}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 section-header",children:[(0,s.jsx)(p.default,{src:"/webbuild/images/Car.png",alt:"Car",width:25,height:25,className:"icon"}),(0,s.jsx)("p",{className:"jsx-c8ae6ed449f64ec5 section-title",children:"Vehicle Details"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Name of Vehicle:"}),(0,s.jsx)("input",{value:e.name_of_vehicle,readOnly:!0,className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Vehicle Number:"}),(0,s.jsx)("input",{value:m||"",readOnly:!0,className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{style:{position:"relative"},className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Issued To:"}),(0,s.jsx)("input",{value:j,onChange:e=>{let t=e.target.value;w(t),"N/A"!==t?U(t):I(!1)},onFocus:e=>{e.target.value&&"N/A"!==e.target.value&&U(e.target.value)},onBlur:()=>{setTimeout(()=>I(!1),200)},placeholder:"Event/Person Name",className:"jsx-c8ae6ed449f64ec5 input"}),q&&Y.length>0&&(0,s.jsx)("div",{className:"jsx-c8ae6ed449f64ec5 suggestions-dropdown",children:M?(0,s.jsx)("div",{className:"jsx-c8ae6ed449f64ec5 suggestion-item loading",children:"Searching..."}):Y.map((e,t)=>(0,s.jsx)("div",{onMouseDown:()=>{w(e.trim()),I(!1)},className:"jsx-c8ae6ed449f64ec5 suggestion-item",children:e},t))}),q&&0===Y.length&&!M&&j&&"N/A"!==j&&(0,s.jsx)("div",{className:"jsx-c8ae6ed449f64ec5 suggestions-dropdown",children:(0,s.jsx)("div",{className:"jsx-c8ae6ed449f64ec5 suggestion-item empty",children:"No matching customers found"})})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Address:"}),(0,s.jsx)("input",{value:v,onChange:e=>y(e.target.value),placeholder:"Enter address",className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Agreed Amount:"}),(0,s.jsx)("input",{value:b,onChange:e=>h(e.target.value),type:"number",placeholder:e.agreed_amount.toString(),className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Received Amount:"}),(0,s.jsx)("input",{value:f,onChange:e=>g(e.target.value),type:"number",placeholder:e.received_amount.toString(),className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 date-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Date:"}),(0,s.jsx)("input",{type:"date",value:l()(P,"DD/MM/YYYY").format("YYYY-MM-DD")||"",onChange:e=>{let t=e.target.value;t?S(l()(t).format("DD/MM/YYYY")):S("")},required:!0,className:"jsx-c8ae6ed449f64ec5 date-input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Driver Expense:"}),(0,s.jsx)("input",{value:D,onChange:e=>_(e.target.value),type:"number",placeholder:e.driver_expense.toString(),className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Fuel Expense:"}),(0,s.jsx)("input",{value:k,onChange:e=>N(e.target.value),type:"number",placeholder:e.fuel_expense.toString(),className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 form-group",children:[(0,s.jsx)("label",{className:"jsx-c8ae6ed449f64ec5 label",children:"Maintenance:"}),(0,s.jsx)("input",{value:z,onChange:e=>C(e.target.value),type:"number",placeholder:e.maintenance.toString(),className:"jsx-c8ae6ed449f64ec5 input"})]}),(0,s.jsxs)("p",{className:"jsx-c8ae6ed449f64ec5 pending-amount",children:["Pending Amount: Rs.",W()]}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 button-group",children:[(0,s.jsx)("button",{onClick:()=>{window.confirm("Do you want to save the details?")&&O()},className:"jsx-c8ae6ed449f64ec5 save-button",children:"Save"}),(0,s.jsx)("button",{onClick:()=>V(!0),className:"jsx-c8ae6ed449f64ec5 clear-button",children:"Clear"})]}),F&&(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 clear-options",children:[(0,s.jsx)("p",{className:"jsx-c8ae6ed449f64ec5",children:"Please select payment status:"}),(0,s.jsxs)("div",{className:"jsx-c8ae6ed449f64ec5 option-buttons",children:[(0,s.jsx)("button",{onClick:$,className:"jsx-c8ae6ed449f64ec5 option-button",children:"Full Payment"}),(0,s.jsx)("button",{onClick:B,className:"jsx-c8ae6ed449f64ec5 option-button",children:"Pending Payment"}),(0,s.jsx)("button",{onClick:()=>{V(!1)},className:"jsx-c8ae6ed449f64ec5 option-button cancel-button",children:"Cancel"})]})]}),(0,s.jsx)(i(),{id:"c8ae6ed449f64ec5",children:".main-container.jsx-c8ae6ed449f64ec5{max-width:800px;margin:0 auto;padding:20px}.header.jsx-c8ae6ed449f64ec5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:10px 0}.user-container.jsx-c8ae6ed449f64ec5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.usrimg.jsx-c8ae6ed449f64ec5{width:50px;height:50px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%}.header-text.jsx-c8ae6ed449f64ec5{margin-left:10px}.helloname.jsx-c8ae6ed449f64ec5{font-size:14px;margin:0}.username.jsx-c8ae6ed449f64ec5{font-size:16px;font-weight:bold;color:darkslategrey;margin:0}.logoutimg.jsx-c8ae6ed449f64ec5{width:25px;height:25px}.separator.jsx-c8ae6ed449f64ec5{margin:25px 0;border-bottom:1px solid black}.section-header.jsx-c8ae6ed449f64ec5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:20px}.icon.jsx-c8ae6ed449f64ec5{width:25px;height:25px}.section-title.jsx-c8ae6ed449f64ec5{font-size:20px;font-weight:500;margin-left:10px}.form-group.jsx-c8ae6ed449f64ec5{margin-bottom:15px}.label.jsx-c8ae6ed449f64ec5{font-size:15px;margin-bottom:5px;display:block}.input.jsx-c8ae6ed449f64ec5{width:100%;padding:10px;border:1px solid gray;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;background-color:#d3d3d3;font-size:15px}.date-group.jsx-c8ae6ed449f64ec5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:15px}.date-input.jsx-c8ae6ed449f64ec5{width:30%;padding:10px;border:1px solid gray;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;background-color:#d3d3d3;font-size:15px}.pending-amount.jsx-c8ae6ed449f64ec5{font-size:18px;margin-top:20px}.button-group.jsx-c8ae6ed449f64ec5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:20px;margin-top:20px}.save-button.jsx-c8ae6ed449f64ec5,.clear-button.jsx-c8ae6ed449f64ec5{padding:10px 20px;background-color:#841584;color:white;border:none;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;cursor:pointer}.clear-options.jsx-c8ae6ed449f64ec5{margin-top:20px;text-align:center;border:1px solid#ccc;padding:15px;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;background-color:#f9f9f9}.option-buttons.jsx-c8ae6ed449f64ec5{margin-top:10px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:10px}.option-button.jsx-c8ae6ed449f64ec5{padding:8px 16px;background-color:#841584;color:white;border:none;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;cursor:pointer}.cancel-button.jsx-c8ae6ed449f64ec5{background-color:#555}.error-container.jsx-c8ae6ed449f64ec5{text-align:center;margin-top:50px}.error-message.jsx-c8ae6ed449f64ec5{color:red;font-size:18px}@media(max-width:600px){.usrimg.jsx-c8ae6ed449f64ec5{width:40px;height:40px}.helloname.jsx-c8ae6ed449f64ec5{font-size:12px}.username.jsx-c8ae6ed449f64ec5{font-size:14px}.logoutimg.jsx-c8ae6ed449f64ec5{width:20px;height:20px}.section-title.jsx-c8ae6ed449f64ec5{font-size:18px}.label.jsx-c8ae6ed449f64ec5{font-size:14px}.input.jsx-c8ae6ed449f64ec5{font-size:14px;padding:8px}.date-group.jsx-c8ae6ed449f64ec5{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}.date-input.jsx-c8ae6ed449f64ec5{width:100%;margin-top:5px}.pending-amount.jsx-c8ae6ed449f64ec5{font-size:16px}.button-group.jsx-c8ae6ed449f64ec5{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:10px}.save-button.jsx-c8ae6ed449f64ec5,.clear-button.jsx-c8ae6ed449f64ec5{width:100%}.suggestions-dropdown.jsx-c8ae6ed449f64ec5{position:absolute;top:100%;left:0;right:0;background:white;border:1px solid#ccc;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;max-height:200px;overflow-y:auto;z-index:1000;-webkit-box-shadow:0 4px 10px rgba(0,0,0,.1);-moz-box-shadow:0 4px 10px rgba(0,0,0,.1);box-shadow:0 4px 10px rgba(0,0,0,.1);margin-top:5px}.suggestion-item.jsx-c8ae6ed449f64ec5{padding:12px 15px;cursor:pointer;border-bottom:1px solid#eee;font-size:14px}.suggestion-item.jsx-c8ae6ed449f64ec5:hover{background-color:#f0e6ff}.suggestion-item.jsx-c8ae6ed449f64ec5:last-child{border-bottom:none}.suggestion-item.loading.jsx-c8ae6ed449f64ec5{text-align:center;color:#666;font-style:italic}.suggestion-item.empty.jsx-c8ae6ed449f64ec5{text-align:center;color:#999;font-style:italic;cursor:default}}"})]}):(0,s.jsx)("div",{className:"error-container",children:(0,s.jsx)("p",{className:"error-message",children:"No details available for this vehicle."})})}},83805:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\chaku\\\\OneDrive\\\\Desktop\\\\CarFinanceFrontendWeb\\\\src\\\\app\\\\ViewCarDetails\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\chaku\\OneDrive\\Desktop\\CarFinanceFrontendWeb\\src\\app\\ViewCarDetails\\page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,779,77,103,668,926,369],()=>a(45892));module.exports=s})();